var _0x4204=['\x20!!!!!!!!\x20HI\x20!!!!!!!!\x20invoice.payment_succeeded','stripe\x20apiKey','rawBody','object','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20subsptn_payment\x20typeof\x20subsptn_payment:\x20','--\x20>\x20cancelsubscription\x20Error\x20getting\x20project\x20','userid','!!!!!!!!\x20HI\x20!!!!!!!!\x20checkout.session.completed','***\x20***\x20invoice.payment_succeeded\x20-\x20index:\x20','get\x20PaymentMethods\x20list\x20req.params','lines','subscription.deleted','canceled_at','format','»»»\x20»»»\x20\x20paymentMethod\x20attached\x20\x20error\x20','log','end','del','raw','default_payment_method','exports','save','saveOnDB\x20plan_name','saveFirstInvoicePaymentSucceeded\x20stripe_event','then','sessionid','payment','findOne','detach','***\x20***\x20customer.subscription.deleted\x20','»»»\x20»»»\x20get\x20customer\x20from\x20db\x20-\x20projectid','project_id','USECASE\x20\x20invoice.payment_succeeded\x20\x20billing_reason\x20subscription_create\x20','***\x20***\x20checkout.session.completed\x20-\x20getSubscritionById\x20subscr\x20object_type:\x20','PAYMENT_STRIPE_APIKEY','data','customer.subscription.deleted','list','customers','stripe\x20plan_name:\x20','detachPaymentFunct\x20>\x20paymentMethodid\x20','env','start','***\x20***\x20invoice.payment_succeeded\x20-\x20start:\x20','credit_card_cvc','find','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20','***\x20***\x20invoice.payment_succeeded\x20-\x20subscription\x20ID:\x20','invoice_settings','»»»»\x20stripe\x20endpointSecret:\x20','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20subsptn_payment:\x20','billing_reason','»»»\x20»»»\x20\x20paymentMethod\x20attached\x20','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20>\x20profile\x20>\x20agents','--\x20>\x20checkoutSession\x20get\x20by\x20id\x20from\x20stripe\x20\x20err\x20','../../../middleware/passport','price','customer.subscription.deleted\x20subscriptionPayment\x20project\x20id:\x20','error','/checkoutSession/:sessionid','sort','get\x20PaymentMethods\x20list\x20req.params\x20>\x20customer_id\x20','projectid','sessions','--\x20>\x20get\x20customer\x20from\x20db\x20-\x20subscription\x20>\x20customer\x20id\x20','jwt','application/json','Error\x20saving\x20object.','customer.subscription.deleted\x20profile\x20to\x20update\x20(event.data.object.canceled_at)\x20','/customers/:customerid','basic','name','stripe\x20project_id:\x20','--\x20>\x20get\x20customer\x20from\x20db\x20>\x20customer\x20from\x20stripe\x20API\x20','***\x20***\x20checkout.session.completed\x20-\x20getSubscritionById\x20err\x20','get\x20PaymentMethods\x20list\x20>\x20paymentMethods\x20','send','subscription_create','»»»\x20»»»\x20cancelsubscription\x20projectid','update','»»»\x20»»»\x20updatesubscription\x20projectid','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20-\x20err\x20','customer','../../../config/winston','\x20typeof\x20','catch','invoice.payment_succeeded','profile','stripe\x20checkout.session.completed','attach','detachPaymentFunc\x20result\x20','headers','agents','--\x20>\x20subscription\x20get\x20by\x20id\x20from\x20stripe\x20\x20err\x20','customer.subscription.deleted\x20profile\x20to\x20update\x20','»»»\x20»»»\x20\x20paymentMethod\x20create\x20\x20error\x20','Types','/:subscriptionid','passport','---\x20>\x20ERROR\x20','--\x20>\x20subscription\x20get\x20by\x20id\x20from\x20stripe\x20','»»»\x20»»»\x20cancelsubscription\x20userid','stripe\x20user_id:','»»»\x20»»»\x20updatesubscription\x20userid','YYYY-MM-DDTHH:mm:ss.SSS','json','Webhook\x20Error:\x20','stripe','***\x20***\x20!!!!!!!!!!!!!!!!!!!!!!\x20checkout.session.completed\x20-\x20subscription\x20ID:\x20','exec','»»»»\x20stripe\x20apiKey:\x20','/updatesubscription','body','mongoose','retrieve','webhooks','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20>\x20profile\x20>\x20name','status','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20>\x20profile\x20>\x20agents\x20typeof','split','params','client_reference_id','subscriptionid','paymentMethods','moment','debug','saveFirstInvoicePaymentSucceeded\x20subscriptionid','savedSubscriptionPayment\x20','stripe\x20endpointSecret','stripe\x20client_reference_id','get','free','checkout.session.completed','--\x20>\x20updatesubscription\x20Error\x20getting\x20project\x20','--\x20>\x20get\x20customer\x20from\x20db\x20>\x20customer\x20+\x20paymentMethods\x20','type','stripe\x20seats_numAsString:\x20','\x20!!!!!!!!\x20HI\x20!!!!!!!!!!!\x20customer.subscription.deleted','authenticate','--\x20>\x20subscription\x20get\x20by\x20id\x20freq.params.subscriptionid\x20','subscription','--\x20>\x20cancelsubscription\x20confirmation\x20','***\x20***\x20»»»\x20»»»\x20customer.subscription.deleted\x20subscriptionPayment\x20','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20>\x20profile','period','Sandbox','post','saveOnDB\x20seats_num','***\x20***\x20invoice.payment_succeeded\x20-\x20BILLING\x20REASON\x20','****\x20Stripe\x20error\x20constructEvent:\x20','PAYMENT_STRIPE_API_SECRET_KEY','--\x20>\x20updatesubscription\x20\x20project\x20','constructEvent','message','--\x20>\x20get\x20customer\x20from\x20db\x20-\x20Error\x20','ObjectId','body-parser','stripe-signature','info','put','/customer/:projectid','stripe\x20apiSecretKey','card','--\x20>\x20GET\x20SUBSCRIPTION\x20PAYMENTS\x20ERRORt\x20','updateProjectProfile\x20Error\x20','user_id','subscriptions','»»»\x20»»»\x20\x20update\x20customer\x20-\x20cc\x20from\x20body\x20','get\x20PaymentMethods\x20list\x20>\x20paymentMethods\x20>\x20paymentMethods.data\x20','--\x20>\x20cancelsubscription\x20\x20err\x20','stripe\x20sig:\x20','»»»\x20»»»\x20\x20update\x20customer\x20-\x20customerid\x20from\x20params\x20','unix'];(function(_0x1da2f4,_0x42046f){var _0x3e4df4=function(_0x545494){while(--_0x545494){_0x1da2f4['push'](_0x1da2f4['shift']());}};_0x3e4df4(++_0x42046f);}(_0x4204,0xe0));var _0x3e4d=function(_0x1da2f4,_0x42046f){_0x1da2f4=_0x1da2f4-0x0;var _0x3e4df4=_0x4204[_0x1da2f4];return _0x3e4df4;};var express=require('express');var router=express['Router']();var winston=require(_0x3e4d('0x20'));var Project=require('../../../models/project');var SubscriptionPayment=require('../models/subscription-payment');var moment=require(_0x3e4d('0x49'));var mongoose=require(_0x3e4d('0x3e'));var passport=require(_0x3e4d('0x2f'));require(_0x3e4d('0x4'))(passport);var validtoken=require('../../../middleware/valid-token');const apiKey=process[_0x3e4d('0xa3')][_0x3e4d('0x9c')];winston[_0x3e4d('0x4a')](_0x3e4d('0x7b')+apiKey);const stripe=require(_0x3e4d('0x38'))(apiKey);const endpointSecret=process['env']['PAYMENT_STRIPE_SECRET'];winston['debug'](_0x3e4d('0x4d')+endpointSecret);const apiSecretKey=process[_0x3e4d('0xa3')][_0x3e4d('0x63')];winston['debug'](_0x3e4d('0x6e')+apiSecretKey);const bodyParser=require(_0x3e4d('0x69'));router[_0x3e4d('0x5f')]('/webhook',bodyParser[_0x3e4d('0x8c')]({'type':_0x3e4d('0xf')}),function(_0xa0f554,_0x451ef1){winston[_0x3e4d('0x4a')](_0x3e4d('0xab')+endpointSecret);winston[_0x3e4d('0x4a')](_0x3e4d('0x3b')+apiKey);winston['debug'](_0x3e4d('0x6e')+apiSecretKey);const _0x48b549=_0xa0f554[_0x3e4d('0x28')][_0x3e4d('0x6a')];winston['debug'](_0x3e4d('0x77'),_0x48b549);let _0x7722d8;try{_0x7722d8=stripe[_0x3e4d('0x40')][_0x3e4d('0x65')](_0xa0f554[_0x3e4d('0x7c')],_0x48b549,endpointSecret);}catch(_0x4e4c76){winston[_0x3e4d('0x7')](_0x3e4d('0x62'),_0x4e4c76[_0x3e4d('0x66')]);return _0x451ef1[_0x3e4d('0x42')](0x190)[_0x3e4d('0x19')](_0x3e4d('0x37')+_0x4e4c76['message']);}if(_0x7722d8['type']===_0x3e4d('0x51')){winston[_0x3e4d('0x4a')](_0x3e4d('0x81'));const _0x7d403a=_0x7722d8[_0x3e4d('0x9d')][_0x3e4d('0x7d')];winston[_0x3e4d('0x6b')](_0x3e4d('0x25'),_0x7d403a);var _0x13999f=_0x7d403a[_0x3e4d('0x46')];winston[_0x3e4d('0x6b')](_0x3e4d('0x4e'),_0x13999f);var _0x2d7be7=_0x13999f[_0x3e4d('0x44')]('_')[0x0];winston[_0x3e4d('0x6b')](_0x3e4d('0x33')+_0x2d7be7);var _0x404cbc=_0x13999f[_0x3e4d('0x44')]('_')[0x1];winston[_0x3e4d('0x6b')](_0x3e4d('0x15')+_0x404cbc);var _0x1a9ce0=_0x13999f[_0x3e4d('0x44')]('_')[0x2];winston['info'](_0x3e4d('0xa1')+_0x1a9ce0);var _0x1bbf22=_0x13999f[_0x3e4d('0x44')]('_')[0x3];winston['info']('stripe\x20seats_num:\x20'+_0x1bbf22+'typeof\x20',typeof _0x1bbf22);var _0x101627=Number(_0x1bbf22);winston[_0x3e4d('0x6b')](_0x3e4d('0x55')+_0x101627+_0x3e4d('0x21'),typeof _0x101627);var _0x5b76b3=_0x7722d8['data'][_0x3e4d('0x7d')]['subscription'];winston['info'](_0x3e4d('0x39'),_0x5b76b3);getSubscritionById(_0x5b76b3)[_0x3e4d('0x92')](function(_0x5e7407){var _0x5bbc27=_0x5e7407[_0x3e4d('0x7d')];winston[_0x3e4d('0x6b')](_0x3e4d('0x9b'),_0x5bbc27);var _0x24caa3=moment[_0x3e4d('0x79')](_0x5e7407['current_period_start'])[_0x3e4d('0x87')](_0x3e4d('0x35'));winston[_0x3e4d('0x6b')]('***\x20***\x20checkout.session.completed\x20-\x20getSubscritionById\x20***\x20start\x20***\x20:\x20',_0x24caa3);var _0xaf6537=moment[_0x3e4d('0x79')](_0x5e7407['current_period_end'])[_0x3e4d('0x87')]('YYYY-MM-DDTHH:mm:ss.SSS');winston[_0x3e4d('0x6b')]('***\x20***\x20checkout.session.completed\x20-\x20getSubscription\x20***\x20end\x20***\x20:\x20',_0xaf6537);var _0x28d9a4={'profile':{'name':_0x1a9ce0,'type':_0x3e4d('0x94'),'subscription_creation_date':_0x24caa3,'subStart':_0x24caa3,'subEnd':_0xaf6537,'subscriptionId':_0x5b76b3,'last_stripe_event':_0x7722d8['type'],'agents':_0x101627}};updateProjectProfile(_0x404cbc,_0x28d9a4,_0x3e4d('0x51'));saveOnDB(_0x5b76b3,_0x404cbc,_0x5e7407,_0x2d7be7,_0x7722d8['type'],_0x1a9ce0,_0x101627);})[_0x3e4d('0x22')](function(_0x12b28f){winston[_0x3e4d('0x7')](_0x3e4d('0x17'),_0x12b28f);});}if(_0x7722d8[_0x3e4d('0x54')]===_0x3e4d('0x23')){winston[_0x3e4d('0x6b')](_0x3e4d('0x7a'));winston[_0x3e4d('0x6b')](_0x3e4d('0x61'),_0x7722d8[_0x3e4d('0x9d')]['object'][_0x3e4d('0x0')]);var _0x14c4ce=_0x7722d8[_0x3e4d('0x9d')][_0x3e4d('0x7d')][_0x3e4d('0x84')]['total_count'];winston[_0x3e4d('0x6b')]('***\x20***\x20invoice.payment_succeeded\x20-\x20linesNum:\x20',_0x14c4ce);var _0x3797ee=_0x14c4ce-0x1;winston[_0x3e4d('0x6b')](_0x3e4d('0x82'),_0x3797ee);var _0xf75913=moment[_0x3e4d('0x79')](_0x7722d8[_0x3e4d('0x9d')][_0x3e4d('0x7d')]['lines']['data'][_0x3797ee][_0x3e4d('0x5d')][_0x3e4d('0xa4')])[_0x3e4d('0x87')](_0x3e4d('0x35'));winston['info'](_0x3e4d('0xa5'),_0xf75913);var _0x2ba585=moment[_0x3e4d('0x79')](_0x7722d8[_0x3e4d('0x9d')][_0x3e4d('0x7d')]['lines']['data'][_0x3797ee][_0x3e4d('0x5d')][_0x3e4d('0x8a')])[_0x3e4d('0x87')](_0x3e4d('0x35'));winston[_0x3e4d('0x6b')]('***\x20***\x20invoice.payment_succeeded\x20-\x20end:\x20',_0x2ba585);var _0x5b76b3=_0x7722d8[_0x3e4d('0x9d')]['object'][_0x3e4d('0x59')];winston[_0x3e4d('0x6b')]('***\x20***\x20invoice.payment_succeeded\x20-\x20subscription\x20ID:\x20',_0x5b76b3);if(_0x5b76b3==null){_0x5b76b3=_0x7722d8['data']['object'][_0x3e4d('0x84')]['data'][0x0][_0x3e4d('0x59')];winston[_0x3e4d('0x6b')](_0x3e4d('0xa9'),_0x5b76b3);}if(_0x7722d8['data'][_0x3e4d('0x7d')][_0x3e4d('0x0')]!==_0x3e4d('0x1a')){getSubByIdAndCheckoutSessionCompletedEvnt(_0x5b76b3)[_0x3e4d('0x92')](function(_0x298d75){winston[_0x3e4d('0x6b')](_0x3e4d('0xac'),_0x298d75);winston[_0x3e4d('0x6b')](_0x3e4d('0x7e'),typeof _0x298d75);if(_0x298d75){var _0x24ae21=_0x298d75[_0x3e4d('0x99')];winston[_0x3e4d('0x6b')]('***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20subsptn_payment\x20>\x20project_id:\x20',_0x24ae21);Project['findOne']({'_id':_0x24ae21},function(_0x3b8b7a,_0x37d6a3){if(_0x3b8b7a){winston[_0x3e4d('0x6b')]('***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20find\x20Project\x20',_0x3b8b7a);return _0x3b8b7a;}if(_0x37d6a3){winston[_0x3e4d('0x6b')](_0x3e4d('0xa8'),_0x37d6a3);winston[_0x3e4d('0x6b')](_0x3e4d('0x5c'),_0x37d6a3[_0x3e4d('0x24')]);var _0x3189bd=_0x37d6a3[_0x3e4d('0x24')][_0x3e4d('0x29')];winston[_0x3e4d('0x6b')](_0x3e4d('0x2'),_0x3189bd);var _0x344bdb=_0x37d6a3[_0x3e4d('0x24')][_0x3e4d('0x14')];winston[_0x3e4d('0x6b')](_0x3e4d('0x43'),typeof _0x3189bd);var _0x5bf653=_0x298d75[_0x3e4d('0x72')];winston[_0x3e4d('0x6b')](_0x3e4d('0x41'),_0x344bdb);var _0x9e7803={'profile':{'name':_0x344bdb,'type':'payment','subStart':_0xf75913,'subEnd':_0x2ba585,'subscriptionId':_0x5b76b3,'last_stripe_event':_0x7722d8[_0x3e4d('0x54')],'agents':_0x3189bd}};updateProjectProfile(_0x24ae21,_0x9e7803,_0x3e4d('0x23'));saveOnDB(_0x5b76b3,_0x24ae21,_0x7722d8,_0x5bf653,_0x7722d8['type'],_0x344bdb,_0x3189bd);}});}})[_0x3e4d('0x22')](function(_0x2efd0d){winston[_0x3e4d('0x7')](_0x3e4d('0x1e'),_0x2efd0d);});}else if(_0x7722d8[_0x3e4d('0x9d')]['object'][_0x3e4d('0x0')]===_0x3e4d('0x1a')){console[_0x3e4d('0x89')](_0x3e4d('0x9a'));saveFirstInvoicePaymentSucceeded(_0x5b76b3,_0x7722d8,_0x7722d8[_0x3e4d('0x54')]);}}if(_0x7722d8[_0x3e4d('0x54')]===_0x3e4d('0x9e')){winston[_0x3e4d('0x6b')](_0x3e4d('0x56'));winston['info']('customer.subscription.deleted\x20event\x20',_0x7722d8);var _0x5b76b3=_0x7722d8['data']['object']['id'];winston[_0x3e4d('0x6b')]('***\x20***\x20subscription\x20ID\x20',_0x5b76b3);getSubByIdAndCheckoutSessionCompletedEvnt(_0x5b76b3)[_0x3e4d('0x92')](function(_0xce2fd5){winston[_0x3e4d('0x6b')](_0x3e4d('0x5b'),_0xce2fd5);if(_0xce2fd5){var _0x7fad1e=_0xce2fd5['project_id'];winston[_0x3e4d('0x6b')](_0x3e4d('0x6'),_0x7fad1e);var _0x5777cf=_0xce2fd5['user_id'];winston[_0x3e4d('0x6b')]('customer.subscription.deleted\x20subscriptionPayment\x20user\x20id:\x20',_0x5777cf);}var _0x3436b3={'profile':{'subscriptionId':_0x5b76b3,'name':_0x3e4d('0x5e'),'type':_0x3e4d('0x50'),'agents':0x1,'last_stripe_event':_0x7722d8['type'],'subEnd':_0x7722d8[_0x3e4d('0x9d')][_0x3e4d('0x7d')][_0x3e4d('0x86')]}};winston[_0x3e4d('0x6b')](_0x3e4d('0x11'),_0x7722d8['data'][_0x3e4d('0x7d')]['canceled_at']);winston[_0x3e4d('0x6b')](_0x3e4d('0x2b'),_0x3436b3[_0x3e4d('0x24')]);updateProjectProfile(_0x7fad1e,_0x3436b3,_0x3e4d('0x85'));saveOnDB(_0x5b76b3,_0x7fad1e,_0x7722d8[_0x3e4d('0x9d')][_0x3e4d('0x7d')],_0x5777cf,_0x7722d8[_0x3e4d('0x54')],_0x1a9ce0,0x1);})[_0x3e4d('0x22')](function(_0x5b8719){winston[_0x3e4d('0x7')](_0x3e4d('0x97'),_0x5b8719);});}_0x451ef1[_0x3e4d('0x36')]({'received':!![]});});function getSubByIdAndCheckoutSessionCompletedEvnt(_0x58b9f9){return new Promise(function(_0x25bac5,_0x5d32b6){SubscriptionPayment[_0x3e4d('0x95')]({'subscription_id':_0x58b9f9,'stripe_event':_0x3e4d('0x51')},function(_0x43c2b3,_0x2adc61){if(_0x43c2b3)_0x5d32b6(_0x43c2b3);var _0x278c71=_0x2adc61;_0x25bac5(_0x278c71);});});};function getSubscritionById(_0xc9b0af){return new Promise(function(_0xdd8f6f,_0x143126){const _0x461ef4=require(_0x3e4d('0x38'))(apiSecretKey);_0x461ef4[_0x3e4d('0x73')][_0x3e4d('0x3f')](_0xc9b0af,function(_0x582df8,_0x30d9aa){if(_0x582df8)_0x143126(_0x582df8);var _0x30d9aa=_0x30d9aa;_0xdd8f6f(_0x30d9aa);});});};function updateProjectProfile(_0x9f428e,_0x1d6769,_0xf8420f){Project['findByIdAndUpdate'](_0x9f428e,_0x1d6769,{'new':!![],'upsert':!![]},function(_0xd6e791,_0x1dc7a5){if(_0xd6e791){winston[_0x3e4d('0x7')](_0x3e4d('0x71'),_0xd6e791);}else{winston[_0x3e4d('0x4a')](_0x1dc7a5);}});}function saveOnDB(_0x5b29c9,_0x30d1a6,_0x288c55,_0x3d517f,_0x5f3c2e,_0x5bfba4,_0x126ee1){winston[_0x3e4d('0x6b')](_0x3e4d('0x90'),_0x5bfba4);winston['info'](_0x3e4d('0x60'),_0x126ee1);var _0x25dc2f=new SubscriptionPayment({'_id':new mongoose[(_0x3e4d('0x2d'))][(_0x3e4d('0x68'))](),'subscription_id':_0x5b29c9,'project_id':_0x30d1a6,'user_id':_0x3d517f,'stripe_event':_0x5f3c2e,'plan_name':_0x5bfba4,'agents':_0x126ee1,'object':_0x288c55});_0x25dc2f[_0x3e4d('0x8f')](function(_0x4b0964,_0x4c188b){if(_0x4b0964){winston[_0x3e4d('0x7')](_0x3e4d('0x30'),_0x4b0964);return res['status'](0x1f4)[_0x3e4d('0x19')]({'success':![],'msg':_0x3e4d('0x10')});}winston['info'](_0x3e4d('0x4c'),_0x4c188b);});}function saveFirstInvoicePaymentSucceeded(_0x547858,_0x925f12,_0x28bdad){console['log'](_0x3e4d('0x4b'),_0x547858);console[_0x3e4d('0x89')](_0x3e4d('0x91'),_0x28bdad);var _0x3bf6a8=new SubscriptionPayment({'_id':new mongoose[(_0x3e4d('0x2d'))][(_0x3e4d('0x68'))](),'subscription_id':_0x547858,'stripe_event':_0x28bdad,'object':_0x925f12});_0x3bf6a8['save'](function(_0xfd6256,_0x12265b){if(_0xfd6256){winston['error']('---\x20>\x20ERROR\x20',_0xfd6256);return res['status'](0x1f4)[_0x3e4d('0x19')]({'success':![],'msg':_0x3e4d('0x10')});}console[_0x3e4d('0x89')]('savedSubscriptionPayment\x20>>\x20',_0x12265b);});}router[_0x3e4d('0x6c')]('/cancelsubscription',[passport[_0x3e4d('0x57')]([_0x3e4d('0x13'),_0x3e4d('0xe')],{'session':![]}),validtoken],function(_0x543832,_0x5618c7){var _0x74c7d7=_0x543832[_0x3e4d('0x3d')][_0x3e4d('0xb')];var _0x417755=_0x543832['body']['userid'];winston[_0x3e4d('0x6b')](_0x3e4d('0x1b'),_0x74c7d7);winston[_0x3e4d('0x6b')](_0x3e4d('0x32'),_0x417755);Project[_0x3e4d('0x95')]({'_id':_0x74c7d7},function(_0x4f3320,_0x3c05de){if(_0x4f3320){winston[_0x3e4d('0x7')](_0x3e4d('0x7f'),_0x4f3320);return _0x4f3320;}if(_0x3c05de){winston['info']('--\x20>\x20cancelsubscription\x20\x20project\x20',_0x3c05de);var _0x3e701d=_0x3c05de[_0x3e4d('0x24')]['subscriptionId'];const _0x1c4005=require(_0x3e4d('0x38'))(apiSecretKey);_0x1c4005['subscriptions'][_0x3e4d('0x8b')](_0x3e701d,function(_0x173b6d,_0x1da329){if(_0x173b6d){winston['error'](_0x3e4d('0x76'),_0x173b6d);return _0x5618c7[_0x3e4d('0x42')](0x1f4)[_0x3e4d('0x19')]({'success':![],'msg':_0x173b6d});}winston[_0x3e4d('0x6b')](_0x3e4d('0x5a'),_0x1da329);_0x5618c7['json'](_0x1da329);});}});});router[_0x3e4d('0x6c')](_0x3e4d('0x3c'),[passport[_0x3e4d('0x57')]([_0x3e4d('0x13'),_0x3e4d('0xe')],{'session':![]}),validtoken],function(_0x36e30e,_0x40af49){var _0x2df365=_0x36e30e['body'][_0x3e4d('0xb')];var _0x4badc8=_0x36e30e['body'][_0x3e4d('0x80')];var _0x183588=_0x36e30e[_0x3e4d('0x3d')][_0x3e4d('0x5')];winston[_0x3e4d('0x6b')](_0x3e4d('0x1d'),_0x2df365);winston[_0x3e4d('0x6b')](_0x3e4d('0x34'),_0x4badc8);winston[_0x3e4d('0x6b')]('»»»\x20»»»\x20updatesubscription\x20price',_0x183588);const _0x16fbf3=require(_0x3e4d('0x38'))(apiSecretKey);Project[_0x3e4d('0x95')]({'_id':_0x2df365},function(_0x515838,_0x3c240d){if(_0x515838){winston[_0x3e4d('0x7')](_0x3e4d('0x52'),_0x515838);return _0x515838;}if(_0x3c240d){winston['info'](_0x3e4d('0x64'),_0x3c240d);var _0x56b00e=_0x3c240d[_0x3e4d('0x24')]['subscriptionId'];_0x16fbf3[_0x3e4d('0x73')][_0x3e4d('0x1c')](_0x56b00e);}});});router['get'](_0x3e4d('0x2e'),[passport[_0x3e4d('0x57')]([_0x3e4d('0x13'),_0x3e4d('0xe')],{'session':![]}),validtoken],function(_0x59c3cf,_0x2fe1c4){SubscriptionPayment['find']({'subscription_id':_0x59c3cf[_0x3e4d('0x45')][_0x3e4d('0x47')]})[_0x3e4d('0x9')]({'object.created':'asc'})[_0x3e4d('0x3a')](function(_0x5af4ee,_0x235127){if(_0x5af4ee){winston['error'](_0x3e4d('0x70'),project);return _0x2fe1c4[_0x3e4d('0x42')](0x1f4)[_0x3e4d('0x19')]({'success':![],'msg':_0x5af4ee});}_0x2fe1c4[_0x3e4d('0x36')](_0x235127);});});router[_0x3e4d('0x4f')]('/stripesubs/:subscriptionid',[passport['authenticate'](['basic','jwt'],{'session':![]}),validtoken],function(_0xaa7d9,_0x469106){winston[_0x3e4d('0x6b')](_0x3e4d('0x58'),_0xaa7d9[_0x3e4d('0x45')][_0x3e4d('0x47')]);var _0x15fe93=require(_0x3e4d('0x38'))(apiSecretKey);_0x15fe93[_0x3e4d('0x73')][_0x3e4d('0x3f')](_0xaa7d9[_0x3e4d('0x45')][_0x3e4d('0x47')],function(_0x286861,_0x42438b){if(_0x286861){winston[_0x3e4d('0x7')](_0x3e4d('0x2a'),_0x286861);return _0x469106[_0x3e4d('0x42')](0x1f4)[_0x3e4d('0x19')]({'success':![],'msg':_0x286861});}winston[_0x3e4d('0x6b')](_0x3e4d('0x31'),_0x42438b);_0x469106[_0x3e4d('0x36')](_0x42438b);});});router[_0x3e4d('0x4f')](_0x3e4d('0x8'),[passport[_0x3e4d('0x57')]([_0x3e4d('0x13'),'jwt'],{'session':![]}),validtoken],function(_0x5059cf,_0x4c9b10){winston[_0x3e4d('0x6b')]('--\x20>\x20checkoutSession\x20params.sessionid\x20',_0x5059cf['params'][_0x3e4d('0x93')]);var _0x341664=require('stripe')(apiSecretKey);_0x341664['checkout'][_0x3e4d('0xc')][_0x3e4d('0x3f')](_0x5059cf[_0x3e4d('0x45')][_0x3e4d('0x93')],function(_0x5e949d,_0x53245d){if(_0x5e949d){winston[_0x3e4d('0x6b')](_0x3e4d('0x3'),_0x5e949d);return _0x4c9b10['status'](0x1f4)[_0x3e4d('0x19')]({'success':![],'msg':_0x5e949d});}winston[_0x3e4d('0x6b')]('--\x20>\x20checkoutSession\x20get\x20by\x20id\x20from\x20stripe\x20',_0x53245d);_0x4c9b10['json'](_0x53245d);});});router['get'](_0x3e4d('0x6d'),[passport[_0x3e4d('0x57')]([_0x3e4d('0x13'),'jwt'],{'session':![]}),validtoken],function(_0x4f16e2,_0x1d4275){winston[_0x3e4d('0x4a')]('»»»\x20»»»\x20get\x20customer\x20from\x20db\x20',_0x4f16e2[_0x3e4d('0x45')]);var _0x2c9352=_0x4f16e2[_0x3e4d('0x45')][_0x3e4d('0xb')];winston[_0x3e4d('0x4a')](_0x3e4d('0x98'),_0x2c9352);SubscriptionPayment[_0x3e4d('0xa7')]({'project_id':_0x2c9352,'stripe_event':'checkout.session.completed'},async function(_0xbd6945,_0x18d55d){if(_0xbd6945){winston[_0x3e4d('0x4a')](_0x3e4d('0x67'),_0xbd6945);return _0xbd6945;}if(_0x18d55d){_0x18d55d[0x0][_0x3e4d('0x7d')][_0x3e4d('0x1f')];winston[_0x3e4d('0x4a')](_0x3e4d('0xd'),_0x18d55d[0x0][_0x3e4d('0x7d')][_0x3e4d('0x1f')]);const _0x139a6d=_0x18d55d[0x0][_0x3e4d('0x7d')]['customer'];const _0x750e37=require('stripe')(apiSecretKey);const _0x1218df=await _0x750e37[_0x3e4d('0xa0')][_0x3e4d('0x3f')](_0x139a6d);winston[_0x3e4d('0x4a')](_0x3e4d('0x16'),_0x1218df);const _0x311838=await _0x750e37[_0x3e4d('0x48')]['list']({'customer':_0x139a6d,'type':_0x3e4d('0x6f')});_0x1218df[_0x3e4d('0x48')]=_0x311838;winston[_0x3e4d('0x4a')](_0x3e4d('0x53'),_0x18d55d);_0x1d4275[_0x3e4d('0x36')](_0x1218df);}});});router[_0x3e4d('0x5f')](_0x3e4d('0x12'),[passport[_0x3e4d('0x57')]([_0x3e4d('0x13'),_0x3e4d('0xe')],{'session':![]}),validtoken],async function(_0x4b1e2f,_0x2dfcde){var _0x2ef736=_0x4b1e2f[_0x3e4d('0x45')]['customerid'];winston['debug'](_0x3e4d('0x78'),_0x2ef736);winston[_0x3e4d('0x4a')](_0x3e4d('0x74'),_0x4b1e2f[_0x3e4d('0x3d')]);const _0x4de7e8=require(_0x3e4d('0x38'))(apiSecretKey);let _0x3bffb6;try{_0x3bffb6=await _0x4de7e8['paymentMethods']['create']({'type':'card','card':{'number':_0x4b1e2f['body']['credit_card_num'],'exp_month':_0x4b1e2f[_0x3e4d('0x3d')]['expiration_date_month'],'exp_year':_0x4b1e2f[_0x3e4d('0x3d')]['expiration_date_year'],'cvc':_0x4b1e2f['body'][_0x3e4d('0xa6')]}});}catch(_0x4b61c0){winston[_0x3e4d('0x7')](_0x3e4d('0x2c'),_0x4b61c0);return _0x2dfcde[_0x3e4d('0x42')](0x1f6)[_0x3e4d('0x19')]({'success':![],'msg':_0x4b61c0});}winston[_0x3e4d('0x4a')]('»»»\x20»»»\x20\x20paymentMethod',_0x3bffb6);try{const _0x14aea2=await _0x4de7e8[_0x3e4d('0x48')][_0x3e4d('0x26')](_0x3bffb6['id'],{'customer':_0x2ef736});winston[_0x3e4d('0x4a')](_0x3e4d('0x1'),_0x14aea2);}catch(_0x3da3f3){winston[_0x3e4d('0x7')](_0x3e4d('0x88'),_0x3da3f3);return _0x2dfcde[_0x3e4d('0x42')](0x1f5)[_0x3e4d('0x19')]({'success':![],'msg':_0x3da3f3});}const _0x3c244f=await _0x4de7e8[_0x3e4d('0xa0')][_0x3e4d('0x1c')](_0x2ef736,{'invoice_settings':{'default_payment_method':_0x3bffb6['id']}});_0x2dfcde[_0x3e4d('0x36')](_0x3c244f);});router['get']('/payment_methods/:customerid',[passport[_0x3e4d('0x57')]([_0x3e4d('0x13'),_0x3e4d('0xe')],{'session':![]}),validtoken],async function(_0x37fe6c,_0x31ab00){winston['info'](_0x3e4d('0x83'),_0x37fe6c['params']);var _0x21ea98=_0x37fe6c[_0x3e4d('0x45')]['customerid'];winston[_0x3e4d('0x4a')](_0x3e4d('0xa'),_0x21ea98);const _0x46a9db=require(_0x3e4d('0x38'))(apiSecretKey);const _0x347f34=await _0x46a9db[_0x3e4d('0xa0')]['retrieve'](_0x21ea98);const _0x53f025=_0x347f34[_0x3e4d('0xaa')][_0x3e4d('0x8d')];let _0x5bbbcf;try{_0x5bbbcf=await _0x46a9db['paymentMethods'][_0x3e4d('0x9f')]({'customer':_0x21ea98,'type':_0x3e4d('0x6f')});winston[_0x3e4d('0x4a')](_0x3e4d('0x18'),_0x5bbbcf);}catch(_0x4ac527){return _0x31ab00['status'](0x1f5)[_0x3e4d('0x19')]({'success':![],'msg':_0x4ac527});}winston['debug']('get\x20PaymentMethods\x20list\x20>\x20paymentMethods\x20>\x20default_payment_method_id\x20',_0x53f025);_0x5bbbcf[_0x3e4d('0x9d')]['forEach'](_0x8ba7ab=>{if(_0x8ba7ab['id']!==_0x53f025){winston['debug'](_0x3e4d('0x75'),_0x8ba7ab['id']);detachPaymentFunc(_0x8ba7ab['id'],function(_0x1b194f){winston[_0x3e4d('0x6b')](_0x3e4d('0x27'),_0x1b194f);});}});_0x31ab00[_0x3e4d('0x36')](_0x5bbbcf);});async function detachPaymentFunc(_0x2ae20e,_0x51787c){winston[_0x3e4d('0x4a')](_0x3e4d('0xa2'),_0x2ae20e);const _0x4cb464=require(_0x3e4d('0x38'))(apiSecretKey);let _0x2c8b4c;try{_0x2c8b4c=await _0x4cb464[_0x3e4d('0x48')][_0x3e4d('0x96')](_0x2ae20e);_0x51787c(_0x2c8b4c);}catch(_0x5eafae){_0x51787c(_0x5eafae);}}module[_0x3e4d('0x8e')]=router;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBheW1lbnRzL3N0cmlwZS9pbmRleC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIndpbnN0b24iLCJQcm9qZWN0IiwiU3Vic2NyaXB0aW9uUGF5bWVudCIsIm1vbWVudCIsIm1vbmdvb3NlIiwicGFzc3BvcnQiLCJ2YWxpZHRva2VuIiwiYXBpS2V5IiwicHJvY2VzcyIsInN0cmlwZSIsImVuZHBvaW50U2VjcmV0IiwiYXBpU2VjcmV0S2V5IiwiYm9keVBhcnNlciIsIl8weGEwZjU1NCIsIl8weDQ1MWVmMSIsIl8weDQ4YjU0OSIsIl8weDc3MjJkOCIsIl8weDRlNGM3NiIsIl8weDdkNDAzYSIsIl8weDEzOTk5ZiIsIl8weDJkN2JlNyIsIl8weDQwNGNiYyIsIl8weDFhOWNlMCIsIl8weDFiYmYyMiIsIl8weDEwMTYyNyIsIk51bWJlciIsIl8weDViNzZiMyIsImdldFN1YnNjcml0aW9uQnlJZCIsIl8weDVlNzQwNyIsIl8weDViYmMyNyIsIl8weDI0Y2FhMyIsIl8weGFmNjUzNyIsIl8weDI4ZDlhNCIsInVwZGF0ZVByb2plY3RQcm9maWxlIiwic2F2ZU9uREIiLCJfMHgxMmIyOGYiLCJfMHgxNGM0Y2UiLCJfMHgzNzk3ZWUiLCJfMHhmNzU5MTMiLCJfMHgyYmE1ODUiLCJnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCIsIl8weDI5OGQ3NSIsIl8weDI0YWUyMSIsIl8weDNiOGI3YSIsIl8weDM3ZDZhMyIsIl8weDMxODliZCIsIl8weDM0NGJkYiIsIl8weDViZjY1MyIsIl8weDllNzgwMyIsIl8weDJlZmQwZCIsImNvbnNvbGUiLCJzYXZlRmlyc3RJbnZvaWNlUGF5bWVudFN1Y2NlZWRlZCIsIl8weGNlMmZkNSIsIl8weDdmYWQxZSIsIl8weDU3NzdjZiIsIl8weDM0MzZiMyIsIl8weDViODcxOSIsIl8weDU4YjlmOSIsIlByb21pc2UiLCJfMHgyNWJhYzUiLCJfMHg1ZDMyYjYiLCJfMHg0M2MyYjMiLCJfMHgyYWRjNjEiLCJfMHgyNzhjNzEiLCJfMHhjOWIwYWYiLCJfMHhkZDhmNmYiLCJfMHgxNDMxMjYiLCJfMHg0NjFlZjQiLCJfMHg1ODJkZjgiLCJfMHgzMGQ5YWEiLCJfMHg5ZjQyOGUiLCJfMHgxZDY3NjkiLCJfMHhmODQyMGYiLCJfMHhkNmU3OTEiLCJfMHgxZGM3YTUiLCJfMHg1YjI5YzkiLCJfMHgzMGQxYTYiLCJfMHgyODhjNTUiLCJfMHgzZDUxN2YiLCJfMHg1ZjNjMmUiLCJfMHg1YmZiYTQiLCJfMHgxMjZlZTEiLCJfMHgyNWRjMmYiLCJfMHg0YjA5NjQiLCJfMHg0YzE4OGIiLCJyZXMiLCJfMHg1NDc4NTgiLCJfMHg5MjVmMTIiLCJfMHgyOGJkYWQiLCJfMHgzYmY2YTgiLCJfMHhmZDYyNTYiLCJfMHgxMjI2NWIiLCJfMHg1NDM4MzIiLCJfMHg1NjE4YzciLCJfMHg3NGM3ZDciLCJfMHg0MTc3NTUiLCJfMHg0ZjMzMjAiLCJfMHgzYzA1ZGUiLCJfMHgzZTcwMWQiLCJfMHgxYzQwMDUiLCJfMHgxNzNiNmQiLCJfMHgxZGEzMjkiLCJfMHgzNmUzMGUiLCJfMHg0MGFmNDkiLCJfMHgyZGYzNjUiLCJfMHg0YmFkYzgiLCJfMHgxODM1ODgiLCJfMHgxNmZiZjMiLCJfMHg1MTU4MzgiLCJfMHgzYzI0MGQiLCJfMHg1NmIwMGUiLCJfMHg1OWMzY2YiLCJfMHgyZmUxYzQiLCJfMHg1YWY0ZWUiLCJfMHgyMzUxMjciLCJwcm9qZWN0IiwiXzB4YWE3ZDkiLCJfMHg0NjkxMDYiLCJfMHgxNWZlOTMiLCJfMHgyODY4NjEiLCJfMHg0MjQzOGIiLCJfMHg1MDU5Y2YiLCJfMHg0YzliMTAiLCJfMHgzNDE2NjQiLCJfMHg1ZTk0OWQiLCJfMHg1MzI0NWQiLCJfMHg0ZjE2ZTIiLCJfMHgxZDQyNzUiLCJfMHgyYzkzNTIiLCJfMHhiZDY5NDUiLCJfMHgxOGQ1NWQiLCJfMHgxMzlhNmQiLCJfMHg3NTBlMzciLCJfMHgxMjE4ZGYiLCJfMHgzMTE4MzgiLCJfMHg0YjFlMmYiLCJfMHgyZGZjZGUiLCJfMHgyZWY3MzYiLCJfMHg0ZGU3ZTgiLCJfMHgzYmZmYjYiLCJfMHg0YjYxYzAiLCJfMHgxNGFlYTIiLCJfMHgzZGEzZjMiLCJfMHgzYzI0NGYiLCJfMHgzN2ZlNmMiLCJfMHgzMWFiMDAiLCJfMHgyMWVhOTgiLCJfMHg0NmE5ZGIiLCJfMHgzNDdmMzQiLCJfMHg1M2YwMjUiLCJfMHg1YmJiY2YiLCJfMHg0YWM1MjciLCJfMHg4YmE3YWIiLCJkZXRhY2hQYXltZW50RnVuYyIsIl8weDFiMTk0ZiIsIl8weDJhZTIwZSIsIl8weDUxNzg3YyIsIl8weDRjYjQ2NCIsIl8weDJjOGI0YyIsIl8weDVlYWZhZSIsIm1vZHVsZSJdLCJtYXBwaW5ncyI6Imk4TEFBQSxJQUFJQSxPQUFBLENBQVVDLE9BQUEsQyxTQUFBLENBQWQsQ0FDQSxJQUFJQyxNQUFBLENBQVNGLE9BQUEsQyxRQUFBLEdBQWIsQ0FFQSxJQUFJRyxPQUFBLENBQVVGLE9BQUEsQyxlQUFBLENBQWQsQ0FFQSxJQUFJRyxPQUFBLENBQVVILE9BQUEsQyx5QkFBQSxDQUFkLENBQ0EsSUFBSUksbUJBQUEsQ0FBc0JKLE9BQUEsQyxnQ0FBQSxDQUExQixDQUNBLElBQUlLLE1BQUEsQ0FBU0wsT0FBQSxDLGVBQUEsQ0FBYixDQUNBLElBQUlNLFFBQUEsQ0FBV04sT0FBQSxDLGVBQUEsQ0FBZixDQUNBLElBQUlPLFFBQUEsQ0FBV1AsT0FBQSxDLGVBQUEsQ0FBZixDQUVBQSxPQUFBLEMsY0FBQSxFQUF3Q08sUUFBeEMsRUFFQSxJQUFJQyxVQUFBLENBQWFSLE9BQUEsQyxpQ0FBQSxDQUFqQixDQUdBLE1BQU1TLE1BQUEsQ0FBU0MsT0FBQSxDLGVBQUEsRSxlQUFBLENBQWYsQ0FDQVIsT0FBQSxDLGVBQUEsRSxlQUFjLENBQWtCTyxNQUFoQyxFQUVBLE1BQU1FLE1BQUEsQ0FBU1gsT0FBQSxDLGVBQUEsRUFBa0JTLE1BQWxCLENBQWYsQ0FHQSxNQUFNRyxjQUFBLENBQWlCRixPQUFBLEMsS0FBQSxFLHVCQUFBLENBQXZCLENBQ0FSLE9BQUEsQyxPQUFBLEUsZUFB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QyxlQUFBLEUsZUFBQSxDQUF1RDJKLFNBQXZELEVBQ0EsTUFBTUUsU0FBQSxDQUFTL0osT0FBQSxDLGVBQUEsRUFBa0JhLFlBQWxCLENBQWYsQ0FDQSxJQUFJbUosU0FBSixDQUNBLEdBQUksQ0FDRkEsU0FBQSxDQUFnQixNQUFNRCxTQUFBLEMsZUFBQSxFLGVBQUEsRUFDcEJGLFNBRG9CLENBQXRCLENBR0FDLFNBQUEsQ0FBU0UsU0FBVCxFQUpFLENBS0YsTUFBT0MsU0FBUCxDQUFVLENBQ1ZILFNBQUEsQ0FBU0csU0FBVCxFQURVLENBVDhDLENBaUQ1REMsTUFBQSxDLGVBQUEsRUFBaUJqSyxNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4vLyB2YXIgd2luc3RvbiA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL2NvbmZpZy93aW5zdG9uJyk7XG52YXIgd2luc3RvbiA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbmZpZy93aW5zdG9uJylcbi8vIHZhciBQcm9qZWN0ID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL21vZGVscy9wcm9qZWN0XCIpO1xudmFyIFByb2plY3QgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzL3Byb2plY3RcIik7XG52YXIgU3Vic2NyaXB0aW9uUGF5bWVudCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvc3Vic2NyaXB0aW9uLXBheW1lbnRcIik7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG52YXIgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xudmFyIHBhc3Nwb3J0ID0gcmVxdWlyZSgncGFzc3BvcnQnKTtcbi8vIHJlcXVpcmUoJy4uLy4uLy4uLy4uL21pZGRsZXdhcmUvcGFzc3BvcnQnKShwYXNzcG9ydCk7XG5yZXF1aXJlKFwiLi4vLi4vLi4vbWlkZGxld2FyZS9wYXNzcG9ydFwiKShwYXNzcG9ydCk7XG4vLyB2YXIgdmFsaWR0b2tlbiA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL21pZGRsZXdhcmUvdmFsaWQtdG9rZW4nKVxudmFyIHZhbGlkdG9rZW4gPSByZXF1aXJlKCcuLi8uLi8uLi9taWRkbGV3YXJlL3ZhbGlkLXRva2VuJylcbi8vIFNldCB5b3VyIHNlY3JldCBrZXk6IHJlbWVtYmVyIHRvIGNoYW5nZSB0aGlzIHRvIHlvdXIgbGl2ZSBzZWNyZXQga2V5IGluIHByb2R1Y3Rpb25cbi8vIFNlZSB5b3VyIGtleXMgaGVyZTogaHR0cHM6Ly9kYXNoYm9hcmQuc3RyaXBlLmNvbS9hY2NvdW50L2FwaWtleXNcbmNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LlBBWU1FTlRfU1RSSVBFX0FQSUtFWTtcbndpbnN0b24uZGVidWcoJ3N0cmlwZSBhcGlLZXknICsgYXBpS2V5KTtcblxuY29uc3Qgc3RyaXBlID0gcmVxdWlyZSgnc3RyaXBlJykoYXBpS2V5KTtcblxuLy8gRmluZCB5b3VyIGVuZHBvaW50J3Mgc2VjcmV0IGluIHlvdXIgRGFzaGJvYXJkJ3Mgd2ViaG9vayBzZXR0aW5nc1xuY29uc3QgZW5kcG9pbnRTZWNyZXQgPSBwcm9jZXNzLmVudi5QQVlNRU5UX1NUUklQRV9TRUNSRVQ7XG53aW5zdG9uLmRlYnVnKCdzdHJpcGUgZW5kcG9pbnRTZWNyZXQnICsgZW5kcG9pbnRTZWNyZXQpO1xuXG5jb25zdCBhcGlTZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5QQVlNRU5UX1NUUklQRV9BUElfU0VDUkVUX0tFWTtcbndpbnN0b24uZGVidWcoJ3N0cmlwZSBhcGlTZWNyZXRLZXknICsgYXBpU2VjcmV0S2V5KTtcblxuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG5cbi8vIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL2NoZWNrb3V0L2Z1bGZpbGxtZW50I3dlYmhvb2tzXG4vLyBjdXJsIC1YIFBPU1QgLXUgYW5kcmVhLmxlb0BmMjEuaXQ6MTIzNDU2IC1IICdDb250ZW50LVR5cGU6YXBwbGljYXRpb24vanNvbicgLWQgJ3tcInR5cGVcIjpcInBheW1lbnRfaW50ZW50LnN1Y2NlZWRlZFwifScgIGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9tb2R1bGVzL3BheW1lbnRzL3N0cmlwZS93ZWJob29rXG5yb3V0ZXIucG9zdCgnL3dlYmhvb2snLCBib2R5UGFyc2VyLnJhdyh7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KSwgZnVuY3Rpb24gKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIFxuICB3aW5zdG9uLmRlYnVnKCfCu8K7wrvCuyBzdHJpcGUgZW5kcG9pbnRTZWNyZXQ6ICcgKyBlbmRwb2ludFNlY3JldClcbiAgd2luc3Rvbi5kZWJ1ZygnwrvCu8K7wrsgc3RyaXBlIGFwaUtleTogJyArIGFwaUtleSk7XG4gIHdpbnN0b24uZGVidWcoJ3N0cmlwZSBhcGlTZWNyZXRLZXknICsgYXBpU2VjcmV0S2V5KTtcblxuICBjb25zdCBzaWcgPSByZXF1ZXN0LmhlYWRlcnNbJ3N0cmlwZS1zaWduYXR1cmUnXTtcblxuICB3aW5zdG9uLmRlYnVnKCdzdHJpcGUgc2lnOiAnLCBzaWcpXG5cbiAgbGV0IGV2ZW50O1xuXG4gIHRyeSB7XG4gICAgZXZlbnQgPSBzdHJpcGUud2ViaG9va3MuY29uc3RydWN0RXZlbnQocmVxdWVzdC5yYXdCb2R5LCBzaWcsIGVuZHBvaW50U2VjcmV0KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgd2luc3Rvbi5lcnJvcignKioqKiBTdHJpcGUgZXJyb3IgY29uc3RydWN0RXZlbnQ6ICcsIGVyci5tZXNzYWdlKVxuICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNDAwKS5zZW5kKGBXZWJob29rIEVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG5cbiAgLyoqXG4gICAqKiEgKioqIEhhbmRsZSB0aGUgY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQgZXZlbnQgKioqXG4gICAqIE5PVEU6IFRISVMgRVZFTlQgT0NDVVIgT05MWSBXSEVOIElTIENSRUFURUQgQSBORVcgU1VCU0NSSVBUSU9OXG4gICAqIDEpIEZST00gVEhFIFBST1BFUlRZIFwiY2xpZW50X3JlZmVyZW5jZV9pZFwiIEFSRSBPQlRBSU5FRCBUSEU6XG4gICAqICAgIEEpIFVTRVIgSURcbiAgICogICAgQikgUFJPSkVDVCBJRCBcbiAgICogMikgV0lUSCBUSEUgc3Vic2NyaXB0aW9uIElEIChOT1RFIGlzIHRoZSBwcm9wZXJ0eSBzdWJzY3JpcHRpb24pIElTIFJVTk5FRCBBIENBTExCQUNLIFRPIFNUUklQRVxuICAgKiAgICBUTyBPQlRBSU4gVEhFIE9CSkVDVCBcIlNVQlNDUklQVElPTlwiIEFORCBUSEVOIEZST00gVEhJUyBBUkUgT0JUQUlORUQgVEhFOlxuICAgKiAgICBBKSBzdWJzY3JpcHRpb25TdGFydERhdGVcbiAgICogICAgQikgc3Vic2NyaXB0aW9uRW5kRGF0ZVxuICAgKiAgICBDKSBxdWFudGl0eSAod2hpY2ggaW4gdGhlIHRpbGVkZXNrIGRhc2hib2FyZCBjb3JyZXNwb25kcyB0byB0aGUgbnVtYmVyIG9mIGFnZW50cyAvIG9wZXJhdG9ycyBzZWF0cylcbiAgICogMykgV0lUSCBUSEUgT0JUQUlORUQgREFUQSBJUyBVUERBVEVEIFRIRSBQUk9KRUNUICdQUk9GSUxFJyAoaXMgYW4gb2JqZWN0IG5lc3RlZCBpbiB0aGUgcHJvamVjdCBvYmplY3QpIFxuICAgKiA0KSBUSEUgT0JUQUlORUQgT0JKRUNUIFwiU1VCU0NSSVBUSU9OXCIgQU5EIHRoZSBcIlNVQlNDUklQVElPTiBJRFwiLCB0aGUgXCJQUk9KRUNUIElEXCIsIHRoZSBcIlVTRVIgSURcIiBBTkQgc3RyaXBlX2V2ZW50OiBcImNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkXCIgQVJFIFNBVkVEIE9OIE9VUiBEQlxuICAgKiAgICBBUyBcIlNVQlNDUklQVElPTi1QQVlNRU5UXCJcbiAgICovXG5cbiAgaWYgKGV2ZW50LnR5cGUgPT09ICdjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZCcpIHtcbiAgICB3aW5zdG9uLmRlYnVnKCchISEhISEhISBISSAhISEhISEhISBjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZCcpO1xuXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGV2ZW50LmRhdGEub2JqZWN0O1xuICAgIHdpbnN0b24uaW5mbygnc3RyaXBlIGNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkJywgc2Vzc2lvbik7XG5cbiAgICB2YXIgY2xpZW50X3JlZmVyZW5jZV9pZCA9IHNlc3Npb24uY2xpZW50X3JlZmVyZW5jZV9pZDtcbiAgICB3aW5zdG9uLmluZm8oJ3N0cmlwZSBjbGllbnRfcmVmZXJlbmNlX2lkJywgY2xpZW50X3JlZmVyZW5jZV9pZCk7XG5cbiAgICAvKiogMUEgKi9cbiAgICB2YXIgdXNlcl9pZCA9IGNsaWVudF9yZWZlcmVuY2VfaWQuc3BsaXQoXCJfXCIpWzBdO1xuICAgIHdpbnN0b24uaW5mbygnc3RyaXBlIHVzZXJfaWQ6JyArIHVzZXJfaWQpO1xuXG4gICAgLyoqIDFCICovXG4gICAgdmFyIHByb2plY3RfaWQgPSBjbGllbnRfcmVmZXJlbmNlX2lkLnNwbGl0KFwiX1wiKVsxXTtcbiAgICB3aW5zdG9uLmluZm8oJ3N0cmlwZSBwcm9qZWN0X2lkOiAnICsgcHJvamVjdF9pZCk7XG5cbiAgICB2YXIgcGxhbl9uYW1lID0gY2xpZW50X3JlZmVyZW5jZV9pZC5zcGxpdChcIl9cIilbMl07XG4gICAgd2luc3Rvbi5pbmZvKCdzdHJpcGUgcGxhbl9uYW1lOiAnICsgcGxhbl9uYW1lKTtcblxuICAgIHZhciBzZWF0c19udW1Bc1N0cmluZyA9IGNsaWVudF9yZWZlcmVuY2VfaWQuc3BsaXQoXCJfXCIpWzNdO1xuICAgIHdpbnN0b24uaW5mbygnc3RyaXBlIHNlYXRzX251bTogJyArIHNlYXRzX251bUFzU3RyaW5nICsgJ3R5cGVvZiAnLCB0eXBlb2Ygc2VhdHNfbnVtQXNTdHJpbmcpO1xuXG4gICAgdmFyIHNlYXRzX251bSA9IE51bWJlcihzZWF0c19udW1Bc1N0cmluZylcbiAgICB3aW5zdG9uLmluZm8oJ3N0cmlwZSBzZWF0c19udW1Bc1N0cmluZzogJyArIHNlYXRzX251bSArICcgdHlwZW9mICcsIHR5cGVvZiBzZWF0c19udW0pO1xuXG4gICAgdmFyIHN1YnNjcmlwdGlvbklkID0gZXZlbnQuZGF0YS5vYmplY3Quc3Vic2NyaXB0aW9uO1xuICAgIHdpbnN0b24uaW5mbygnKioqICoqKiAhISEhISEhISEhISEhISEhISEhISEhIGNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkIC0gc3Vic2NyaXB0aW9uIElEOiAnLCBzdWJzY3JpcHRpb25JZCk7XG5cbiAgICBnZXRTdWJzY3JpdGlvbkJ5SWQoc3Vic2NyaXB0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHN1YnNjcmlwdGlvbl9vYmopIHtcblxuICAgICAgdmFyIG9iamVjdF90eXBlID0gc3Vic2NyaXB0aW9uX29iai5vYmplY3Q7XG4gICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQgLSBnZXRTdWJzY3JpdGlvbkJ5SWQgc3Vic2NyIG9iamVjdF90eXBlOiAnLCBvYmplY3RfdHlwZSk7XG5cbiAgICAgIC8qKiAyQSAqL1xuICAgICAgdmFyIHN1YnNjcmlwdGlvblN0YXJ0RGF0ZSA9IG1vbWVudC51bml4KHN1YnNjcmlwdGlvbl9vYmouY3VycmVudF9wZXJpb2Rfc3RhcnQpLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcy5TU1MnKVxuICAgICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkIC0gZ2V0U3Vic2NyaXRpb25CeUlkICoqKiBzdGFydCAqKiogOiAnLCBzdWJzY3JpcHRpb25TdGFydERhdGUpO1xuXG4gICAgICAvKiogMkIgKi9cbiAgICAgIHZhciBzdWJzY3JpcHRpb25FbmREYXRlID0gbW9tZW50LnVuaXgoc3Vic2NyaXB0aW9uX29iai5jdXJyZW50X3BlcmlvZF9lbmQpLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcy5TU1MnKVxuICAgICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkIC0gZ2V0U3Vic2NyaXB0aW9uICoqKiBlbmQgKioqIDogJywgc3Vic2NyaXB0aW9uRW5kRGF0ZSk7XG5cbiAgICAgIC8qKlxuICAgICAgICohICoqKiBCT0RZICoqKlxuICAgICAgICovXG4gICAgICB2YXIgYm9keSA9IHtcbiAgICAgICAgcHJvZmlsZToge1xuICAgICAgICAgIG5hbWU6IHBsYW5fbmFtZSxcbiAgICAgICAgICB0eXBlOiAncGF5bWVudCcsXG4gICAgICAgICAgc3Vic2NyaXB0aW9uX2NyZWF0aW9uX2RhdGU6IHN1YnNjcmlwdGlvblN0YXJ0RGF0ZSxcbiAgICAgICAgICBzdWJTdGFydDogc3Vic2NyaXB0aW9uU3RhcnREYXRlLFxuICAgICAgICAgIHN1YkVuZDogc3Vic2NyaXB0aW9uRW5kRGF0ZSxcbiAgICAgICAgICBzdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uSWQsXG4gICAgICAgICAgbGFzdF9zdHJpcGVfZXZlbnQ6IGV2ZW50LnR5cGUsXG4gICAgICAgICAgYWdlbnRzOiBzZWF0c19udW1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiogMyAqL1xuICAgICAgdXBkYXRlUHJvamVjdFByb2ZpbGUocHJvamVjdF9pZCwgYm9keSwgJ2NoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkJyk7XG5cbiAgICAgIC8qKiA0ICovXG4gICAgICBzYXZlT25EQihzdWJzY3JpcHRpb25JZCwgcHJvamVjdF9pZCwgc3Vic2NyaXB0aW9uX29iaiwgdXNlcl9pZCwgZXZlbnQudHlwZSwgcGxhbl9uYW1lLCBzZWF0c19udW0pXG5cbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB3aW5zdG9uLmVycm9yKCcqKiogKioqIGNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkIC0gZ2V0U3Vic2NyaXRpb25CeUlkIGVyciAnLCBlcnIpO1xuICAgIH0pO1xuXG4gIH1cbiAgLy8gb2JqZWN0X3R5cGUgPSBzdWJzY3JpcHRpb24uXG4gIC8qKlxuICAgKiohICoqKiBIYW5kbGUgdGhlIGludm9pY2UucGF5bWVudF9zdWNjZWVkZWQgZXZlbnQgKioqXG4gICAqIE5PVEU6IFRISVMgRVZFTlQgT0NDVVIgV0hFTiBJUyBDUkVBVEVEIEEgTkVXIFNVQlNDUklQVElPTiBBTkQgRVZFUlkgVElNRSBUSEUgU0FNRSBJUyBSRU5FV0VEXG4gICAqIDEpIEZST00gVEhFIE9CSkVDVCBPRiBUSEUgRVZFTlQgQVJFIE9CVEFJTkVEIFRIRTpcbiAgICogICAgQSkgc3Vic2NyaXB0aW9uU3RhcnREYXRlXG4gICAqICAgIEIpIHN1YnNjcmlwdGlvbkVuZERhdGVcbiAgICogICAgQykgc3Vic2NyaXRwdGlvbklkICBcbiAgICogMikgd2hlbiByZWZlciB0byBhIFJFTkVXQUwgKCBiaWxsaW5nX3JlYXNvbiA9PT0gc3Vic2NyaXB0aW9uX2N5Y2xlKVxuICAgKiAgICBJRiBUSEUgVkFMVUUgT0YgVEhFIFBST1BFUlRZIFwiYmlsbGluZ19yZWFzb25cIiBJUyBVTkxJS0UgT0YgXCJzdWJzY3JpcHRpb25fY3JlYXRlXCIgKE1FQU5TIFRIQVQgVEhFIEVWRU5UIFJFRkVSIFRPIEEgUkVORVdBTCBcbiAgICogICAgRk9SIFdISUNIIGJpbGxpbmdfcmVhc29uOiBzdWJzY3JpcHRpb25fY3ljbGUgQU5EIE5PVCBUTyBUSEUgRklSU1QgU1VCU0NSSVBUSU9OKSBcbiAgICogICAgQSkgSVMgT0JUQUlORUQgVEhFICdTVUJTQ1JJUFRJT04tUEFZTUVOVCcgKHdpdGggc3RyaXBlX2V2ZW50OiBcImNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkXCIpIFNBVkVEIEFCT1ZFIEFORCBUSEVOIEZST00gVEhJUzpcbiAgICogICAgICAgLSBUSEUgXCJQUk9KRUNUIElEXCIgXG4gICAqICAgICAgIC0gVEhFIFwiVVNFUiBJRFwiXG4gICAqICAgICAgIFRPIE9CVEFJTiBUSEUgJ1NVQlNDUklQVElPTi1QQVlNRU5UJ0lOIE9VUiBEQiBJUyBMT09LRUQgRk9SIFRIRSBcIlNVQlNDUklQSU9OLVBBWU1FTlRcIiBUSEFUIEhBUyBGT1Igc3Vic2NyaXB0aW9uIGlkIFRIRSBWQUxVRSBPRiAxQyBBTkQgc3RyaXBlX2V2ZW50OiBcImNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkXCJcbiAgICogICAgICAgVEhFIENPTkRJVElPTiBzdHJpcGVfZXZlbnQ6IFwiY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWRcIiAoTk8gTU9SRTogb2JqZWN0X3R5cGUgPSBzdWJzY3JpcHRpb24pIElUJ1MgTkVDRVNTQVJZIFRPIEZJTFRFUiBUSEUgXCJTVUJTQ1JJUElPTi1QQVlNRU5UU1wiIFxuICAgKiAgICAgICBUSEFUIENPTlRBSU4gVEhFICBQUk9QRVJUSUVTICBcInByb2plY3RJRFwiIEFORCBcInVzZXJJRFwiXG4gICAqICAgICAgIFRIRSBFWElTVEVOQ0UgT0YgQSBcIlNVQlNDUklQVElPTi1QQVlNRU5UXCIgV0lUSE9VVCBcInByb2plY3RJRFwiIEFORCBcInVzZXJJRFwiIElTIERVRSBUTyBUSEUgRkFDVCBUSEFUIEFUIFRIRSBNT01FTlQgT0YgVEhFIENSRUFUSU9OIE9GIEEgU1VCU0NSSVBUSU9OIFxuICAgKiAgICAgICBJUyBTQVZFRCBJTiBPVVIgREIgQUxTTyBBIFwiU1VCU0NSSVBUSU9OLVBBWU1FTlRcIiBDT1JSRVNQT05ESU5HIFRPIFRIRSBPQkpFQ1QgUkVUVVJORUQgQlkgIFRIRSBFVkVOVCBcImludm9pY2UucGF5bWVudF9zdWNjZWVkZWRcIiBVU0VGVUwgQkVDQVVTRSBcbiAgICogICAgICAgSVQgQ09OVEFJTlMgVEhFIExJTktTIE9GIFRIRSBJTlZPSUNFIE9GIFRIRSBGSVJTVCBTVUJTQ1JJUFRJT04gKHVzZWQgYnkgdGlsZWRlc2sgZGFzaGJvYXJkIGluIHRoZSBjb21wb25lbnRzIHBheW1lbnRzKVxuICAgKiAgICAgICBCVVQgRlJPTSBXSElDSCBJVCBJUyBOT1QgUE9TU0lCTEUgUFVTSCBBTkQgVEhFTiBUTyBUTyBPQlRBSU4gVEhFIFwicHJvamVjdElEXCIgQU5EIFwidXNlcklEXCJcbiAgICogICAgQikgSVMgVVBEQVRFRCBUSEUgUFJPSkVDVCAnUFJPRklMRScgV0lUSDpcbiAgICogICAgICAgLSBEQVRBIE9CVEFJTkVEIEZST00gVEhFIEVWRU5UJ1MgT0JKRUNUOlxuICAgKiAgICAgICAgIC0gc3Vic2NyaXB0aW9uU3RhcnREYXRlXG4gICAqICAgICAgICAgLSBzdWJzY3JpcHRpb25FbmREYXRlXG4gICAqICAgICAgICAgLSBzdWJzY3JpcHRpb25JZCBcbiAgICogICAgICAgICAtIGxhc3Rfc3RyaXBlX2V2ZW50IFxuICAgKiAgICAgICAgIC0gcXVhbnRpdHkgKHdoaWNoIGluIHRoZSBkYXNoYm9hcmQgY29ycmVzcG9uZHMgdG8gdGhlIG51bWJlciBvZiBhZ2VudHMgLyBvcGVyYXRvcnMgc2VhdHMpXG4gICAqICAgICAgIC0gREFUQSBPQlRBSU5FRCBGUk9NIFRIRSAnU1VCU0NSSVBUSU9OLVBBWU1FTlQnIHdpdGggc3RyaXBlX2V2ZW50OiBcImNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkXCJcbiAgICogICAgICAgICAtIFwiUFJPSkVDVCBJRFwiIGFuZCBcIlVTRVIgSURcIlxuICAgKiAgICBDKSBUSEUgT0JKRUNUIE9GIFRIRSBFVkVOVCBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkIEFORCB0aGUgXCJTVUJTQ1JJUFRJT04gSURcIiwgdGhlIFwiUFJPSkVDVCBJRFwiLCB0aGUgXCJVU0VSIElEXCIgQU5EIHRoZSBcIk9CSkVDVF9UWVBFXCIgKGV2ZW50KSBcbiAgICogICAgICAgQVJFIFNBVkVEIEFTIFwiU1VCU0NSSVBUSU9OLVBBWU1FTlRcIiBPTiBPVVIgREJcbiAgICogMykgd2hlbiByZWZlciB0byBhIENSRUFUSU9OIChiaWxsaW5nX3JlYXNvbiA9PT0gc3Vic2NyaXB0aW9uX2NyZWF0ZSlcbiAgICogICAgQSkgVEhFIE9CSkVDVCBPRiBUSEUgRVZFTlQgaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCBBTkQgVEhFIERBVEEgZXZlbnQudHlwZSA9PT0gaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCAgQVJFIFNBVkVEIEFTIFwiU1VCU0NSSVBUSU9OLVBBWU1FTlRcIlxuICAgKiAgICAgICBPTiBPVVIgREIgKE5PVEU6IFwiUFJPSkVDVCBJRFwiIEFORCBcIlVTRVIgSURcIiBBUkUgU0FWRUQgQVMgbnVsbCBTSU5DRSBJUyBOT1QgUE9TU0lCTEUgVE8gUkVUUklFVkUgVEhFIFZBTFVFUykgXG4gICAqIFxuICAgKi9cbiAgaWYgKGV2ZW50LnR5cGUgPT09ICdpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkJykge1xuXG4gICAgd2luc3Rvbi5pbmZvKCcgISEhISEhISEgSEkgISEhISEhISEgaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCcpO1xuICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkIC0gQklMTElORyBSRUFTT04gJywgZXZlbnQuZGF0YS5vYmplY3QuYmlsbGluZ19yZWFzb24pO1xuXG4gICAgdmFyIGxpbmVzTnVtID0gZXZlbnQuZGF0YS5vYmplY3QubGluZXMudG90YWxfY291bnRcbiAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCAtIGxpbmVzTnVtOiAnLCBsaW5lc051bSk7XG5cbiAgICB2YXIgaW5kZXggPSBsaW5lc051bSAtIDE7XG4gICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGludm9pY2UucGF5bWVudF9zdWNjZWVkZWQgLSBpbmRleDogJywgaW5kZXgpO1xuXG4gICAgLyoqIDFBICovIC8vIFRISVMgV09SS1NcbiAgICB2YXIgc3Vic2NyaXB0aW9uU3RhcnREYXRlID0gbW9tZW50LnVuaXgoZXZlbnQuZGF0YS5vYmplY3QubGluZXMuZGF0YVtpbmRleF0ucGVyaW9kLnN0YXJ0KS5mb3JtYXQoJ1lZWVktTU0tRERUSEg6bW06c3MuU1NTJylcbiAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCAtIHN0YXJ0OiAnLCBzdWJzY3JpcHRpb25TdGFydERhdGUpO1xuXG4gICAgLyoqIDFCICovIC8vIFRISVMgV09SS1NcbiAgICB2YXIgc3Vic2NyaXB0aW9uRW5kRGF0ZSA9IG1vbWVudC51bml4KGV2ZW50LmRhdGEub2JqZWN0LmxpbmVzLmRhdGFbaW5kZXhdLnBlcmlvZC5lbmQpLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcy5TU1MnKVxuICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkIC0gZW5kOiAnLCBzdWJzY3JpcHRpb25FbmREYXRlKTtcblxuICAgIHZhciBzdWJzY3JpcHRpb25JZCA9IGV2ZW50LmRhdGEub2JqZWN0LnN1YnNjcmlwdGlvbjtcbiAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCAtIHN1YnNjcmlwdGlvbiBJRDogJywgc3Vic2NyaXB0aW9uSWQpO1xuXG4gICAgaWYgKHN1YnNjcmlwdGlvbklkID09IG51bGwpIHtcbiAgICAgIHN1YnNjcmlwdGlvbklkID0gZXZlbnQuZGF0YS5vYmplY3QubGluZXMuZGF0YVswXS5zdWJzY3JpcHRpb247XG4gICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCAtIHN1YnNjcmlwdGlvbiBJRDogJywgc3Vic2NyaXB0aW9uSWQpO1xuICAgIH1cblxuICAgIGlmIChldmVudC5kYXRhLm9iamVjdC5iaWxsaW5nX3JlYXNvbiAhPT0gJ3N1YnNjcmlwdGlvbl9jcmVhdGUnKSB7XG5cblxuICAgICAgLy8gVE8gVEVTVCBUSEUgUkVORVdBTCBVTkNPTU1FTlQgU0VUIFRJTUVPVVRcbiAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgLyoqIDJBICovXG4gICAgICBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudChzdWJzY3JpcHRpb25JZCkudGhlbihmdW5jdGlvbiAoc3Vic3B0bl9wYXltZW50KSB7XG4gICAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCBzdWJzcHRuX3BheW1lbnQ6ICcsIHN1YnNwdG5fcGF5bWVudCk7XG4gICAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCBzdWJzcHRuX3BheW1lbnQgdHlwZW9mIHN1YnNwdG5fcGF5bWVudDogJywgdHlwZW9mIHN1YnNwdG5fcGF5bWVudCk7XG4gICAgICAgIGlmIChzdWJzcHRuX3BheW1lbnQpIHtcblxuICAgICAgICAgIHZhciBwcm9qZWN0SWQgPSBzdWJzcHRuX3BheW1lbnQucHJvamVjdF9pZFxuICAgICAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCBzdWJzcHRuX3BheW1lbnQgPiBwcm9qZWN0X2lkOiAnLCBwcm9qZWN0SWQpO1xuXG4gICAgICAgICAgUHJvamVjdC5maW5kT25lKHsgX2lkOiBwcm9qZWN0SWQgfSwgZnVuY3Rpb24gKGVyciwgcHJvamVjdCkge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogZ2V0U3ViQnlJZEFuZENoZWNrb3V0U2Vzc2lvbkNvbXBsZXRlZEV2bnQgIGZpbmQgUHJvamVjdCAnLCBlcnIpO1xuICAgICAgICAgICAgICByZXR1cm4gKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvamVjdCkge1xuICAgICAgICAgICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogZ2V0U3ViQnlJZEFuZENoZWNrb3V0U2Vzc2lvbkNvbXBsZXRlZEV2bnQgIHByb2plY3QgJywgcHJvamVjdCk7XG4gICAgICAgICAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCAgcHJvamVjdCA+IHByb2ZpbGUnLCBwcm9qZWN0LnByb2ZpbGUpO1xuXG4gICAgICAgICAgICAgIHZhciBzZWF0c19udW0gPSBwcm9qZWN0LnByb2ZpbGUuYWdlbnRzO1xuICAgICAgICAgICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogZ2V0U3ViQnlJZEFuZENoZWNrb3V0U2Vzc2lvbkNvbXBsZXRlZEV2bnQgIHByb2plY3QgPiBwcm9maWxlID4gYWdlbnRzJywgc2VhdHNfbnVtKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwbGFuX25hbWUgPSBwcm9qZWN0LnByb2ZpbGUubmFtZTtcbiAgICAgICAgICAgICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGdldFN1YkJ5SWRBbmRDaGVja291dFNlc3Npb25Db21wbGV0ZWRFdm50ICBwcm9qZWN0ID4gcHJvZmlsZSA+IGFnZW50cyB0eXBlb2YnLCB0eXBlb2Ygc2VhdHNfbnVtKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciB1c2VySWQgPSBzdWJzcHRuX3BheW1lbnQudXNlcl9pZFxuICAgICAgICAgICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogZ2V0U3ViQnlJZEFuZENoZWNrb3V0U2Vzc2lvbkNvbXBsZXRlZEV2bnQgIHByb2plY3QgPiBwcm9maWxlID4gbmFtZScsIHBsYW5fbmFtZSk7XG5cbiAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgLy8gIEJPRFkgXG4gICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgIHZhciBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHByb2ZpbGU6IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHBsYW5fbmFtZSxcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdwYXltZW50JyxcbiAgICAgICAgICAgICAgICAgIHN1YlN0YXJ0OiBzdWJzY3JpcHRpb25TdGFydERhdGUsXG4gICAgICAgICAgICAgICAgICBzdWJFbmQ6IHN1YnNjcmlwdGlvbkVuZERhdGUsXG4gICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uSWQsXG4gICAgICAgICAgICAgICAgICBsYXN0X3N0cmlwZV9ldmVudDogZXZlbnQudHlwZSxcbiAgICAgICAgICAgICAgICAgIGFnZW50czogc2VhdHNfbnVtXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLyoqIDJCICovXG4gICAgICAgICAgICAgIHVwZGF0ZVByb2plY3RQcm9maWxlKHByb2plY3RJZCwgYm9keSwgJ2ludm9pY2UucGF5bWVudF9zdWNjZWVkZWQnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8qKiAyQyAqL1xuICAgICAgICAgICAgICBzYXZlT25EQihzdWJzY3JpcHRpb25JZCwgcHJvamVjdElkLCBldmVudCwgdXNlcklkLCBldmVudC50eXBlLCBwbGFuX25hbWUsIHNlYXRzX251bSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHdpbnN0b24uZXJyb3IoJyoqKiAqKiogZ2V0U3ViQnlJZEFuZENoZWNrb3V0U2Vzc2lvbkNvbXBsZXRlZEV2bnQgLSBlcnIgJywgZXJyKTtcbiAgICAgIH0pO1xuICAgICAgLy8gfSwgNTAwMCk7XG4gICAgfSBcbiAgICBlbHNlIGlmIChldmVudC5kYXRhLm9iamVjdC5iaWxsaW5nX3JlYXNvbiA9PT0gJ3N1YnNjcmlwdGlvbl9jcmVhdGUnKSB7XG4gICAgICBjb25zb2xlLmxvZygnVVNFQ0FTRSAgaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCAgYmlsbGluZ19yZWFzb24gc3Vic2NyaXB0aW9uX2NyZWF0ZSAnKSBcbiAgICAgIHNhdmVGaXJzdEludm9pY2VQYXltZW50U3VjY2VlZGVkKHN1YnNjcmlwdGlvbklkLCBldmVudCwgZXZlbnQudHlwZSk7XG4gICAgfSBcbiAgXG4gIH1cblxuICAvKipcbiAgICoqISAqKiogSEFORExFIFRIRSBFVkVOVCBjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCAqKipcbiAgICogdGhpcyBldmVudCBvY2N1cnMgd2hlbiBhIHN1YnNjcmlwdGlvbiBpcyBjYW5jZWxsZWRcbiAgICogLSBmcm9tIHRoZSBUSUxFREVTSycgZGFzaGJvYXJkIChieSBjbGlja2luZyBDQU5DRUwgU1VCU0NSSVBUSU9OIHRoYXQgY2FsbCBjYW5jZWxzdWJzY3JpcHRpb24oKSAtIHNlZSBiZWxvdylcbiAgICogLSBmcm9tIHRoZSBTVFJJUEUnIGRhc2hib2FyZFxuICAgKi9cbiAgaWYgKGV2ZW50LnR5cGUgPT09ICdjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCcpIHtcbiAgICB3aW5zdG9uLmluZm8oJyAhISEhISEhISBISSAhISEhISEhISEhISBjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCcpO1xuICAgIHdpbnN0b24uaW5mbygnY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmRlbGV0ZWQgZXZlbnQgJywgZXZlbnQpO1xuICAgIHZhciBzdWJzY3JpcHRpb25JZCA9IGV2ZW50LmRhdGEub2JqZWN0LmlkXG4gICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIHN1YnNjcmlwdGlvbiBJRCAnLCBzdWJzY3JpcHRpb25JZCk7XG5cbiAgICBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudChzdWJzY3JpcHRpb25JZCkudGhlbihmdW5jdGlvbiAoc3Vic2NyaXB0aW9uUGF5bWVudCkge1xuICAgICAgLy8gU3Vic2NyaXB0aW9uUGF5bWVudC5maW5kKHsgc3Vic2NyaXB0aW9uX2lkOiBzdWJzY3JpcHRpb25JZCwgb2JqZWN0X3R5cGU6IFwic3Vic2NyaXB0aW9uXCIgfSwgZnVuY3Rpb24gKGVyciwgc3Vic2NyaXB0aW9uUGF5bWVudCkge1xuXG4gICAgICAvLyBpZiAoZXJyKSB7XG4gICAgICAvLyAgIHdpbnN0b24uaW5mbygnRXJyb3IgZ2V0dGluZyB0aGUgc3Vic2NyaXB0aW9uUGF5bWVudCAnLCBlcnIpO1xuICAgICAgLy8gICByZXR1cm4gZXJyO1xuICAgICAgLy8gfVxuICAgICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIMK7wrvCuyDCu8K7wrsgY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmRlbGV0ZWQgc3Vic2NyaXB0aW9uUGF5bWVudCAnLCBzdWJzY3JpcHRpb25QYXltZW50KTtcbiAgICAgIGlmIChzdWJzY3JpcHRpb25QYXltZW50KSB7IFxuICAgICAgICB2YXIgcHJvamVjdElkID0gc3Vic2NyaXB0aW9uUGF5bWVudC5wcm9qZWN0X2lkOyBcbiAgICAgICAgd2luc3Rvbi5pbmZvKCdjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCBzdWJzY3JpcHRpb25QYXltZW50IHByb2plY3QgaWQ6ICcsIHByb2plY3RJZClcbiAgICAgICAgXG4gICAgICAgIHZhciB1c2VySWQgPSBzdWJzY3JpcHRpb25QYXltZW50LnVzZXJfaWQ7XG4gICAgICAgIHdpbnN0b24uaW5mbygnY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmRlbGV0ZWQgc3Vic2NyaXB0aW9uUGF5bWVudCB1c2VyIGlkOiAnLCB1c2VySWQpXG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICohICoqKiBCT0RZICoqKlxuICAgICAgICovXG4gICAgICB2YXIgYm9keSA9IHtcbiAgICAgICAgcHJvZmlsZToge1xuICAgICAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb25JZCxcbiAgICAgICAgICBuYW1lOiAnU2FuZGJveCcsXG4gICAgICAgICAgdHlwZTogJ2ZyZWUnLFxuICAgICAgICAgIGFnZW50czogMSxcbiAgICAgICAgICBsYXN0X3N0cmlwZV9ldmVudDogZXZlbnQudHlwZSxcbiAgICAgICAgICBzdWJFbmQ6IGV2ZW50LmRhdGEub2JqZWN0LmNhbmNlbGVkX2F0XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgd2luc3Rvbi5pbmZvKFwiY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmRlbGV0ZWQgcHJvZmlsZSB0byB1cGRhdGUgKGV2ZW50LmRhdGEub2JqZWN0LmNhbmNlbGVkX2F0KSBcIiwgZXZlbnQuZGF0YS5vYmplY3QuY2FuY2VsZWRfYXQpXG4gICAgICB3aW5zdG9uLmluZm8oXCJjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCBwcm9maWxlIHRvIHVwZGF0ZSBcIiwgYm9keS5wcm9maWxlKVxuICAgICAgXG4gICAgICB1cGRhdGVQcm9qZWN0UHJvZmlsZShwcm9qZWN0SWQsIGJvZHksICdzdWJzY3JpcHRpb24uZGVsZXRlZCcpO1xuICAgICAgc2F2ZU9uREIoc3Vic2NyaXB0aW9uSWQsIHByb2plY3RJZCwgZXZlbnQuZGF0YS5vYmplY3QsIHVzZXJJZCwgZXZlbnQudHlwZSwgcGxhbl9uYW1lLCAxKTtcblxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHdpbnN0b24uZXJyb3IoJyoqKiAqKiogY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmRlbGV0ZWQgJywgZXJyKTtcbiAgICB9KTtcblxuICB9XG4gIC8vIFJldHVybiBhIHJlc3BvbnNlIHRvIGFja25vd2xlZGdlIHJlY2VpcHQgb2YgdGhlIGV2ZW50XG4gIHJlc3BvbnNlLmpzb24oeyByZWNlaXZlZDogdHJ1ZSB9KTtcbn0pO1xuXG5cbmZ1bmN0aW9uIGdldFN1YkJ5SWRBbmRDaGVja291dFNlc3Npb25Db21wbGV0ZWRFdm50KHN1YnNjcmlwdGlvbmlkKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgU3Vic2NyaXB0aW9uUGF5bWVudC5maW5kT25lKHsgc3Vic2NyaXB0aW9uX2lkOiBzdWJzY3JpcHRpb25pZCwgc3RyaXBlX2V2ZW50OiBcImNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkXCIgfSwgZnVuY3Rpb24gKGVyciwgc3Vic2NyaXB0aW9uUGF5bWVudCkge1xuICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XG5cbiAgICAgIHZhciBzdWJzY3JpcHRpb25fcGF5bWVudCA9IHN1YnNjcmlwdGlvblBheW1lbnQ7XG4gICAgICByZXNvbHZlKHN1YnNjcmlwdGlvbl9wYXltZW50KTtcbiAgICB9KTtcbiAgfSlcbn07XG5cbmZ1bmN0aW9uIGdldFN1YnNjcml0aW9uQnlJZChzdWJzY3JpcHRpb25pZCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGNvbnN0IF9zdHJpcGUgPSByZXF1aXJlKFwic3RyaXBlXCIpKGFwaVNlY3JldEtleSk7XG4gICAgX3N0cmlwZS5zdWJzY3JpcHRpb25zLnJldHJpZXZlKHN1YnNjcmlwdGlvbmlkLCBmdW5jdGlvbiAoZXJyLCBzdWJzY3JpcHRpb24pIHtcbiAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xuXG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uO1xuICAgICAgcmVzb2x2ZShzdWJzY3JpcHRpb24pO1xuICAgIH0pO1xuICB9KVxufTtcblxuLy8gU0VFIFVwZGF0aW5nIG5lc3RlZCBvYmplY3QgaW4gbW9uZ29vc2UgXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMzgzMjkyMS91cGRhdGluZy1uZXN0ZWQtb2JqZWN0LWluLW1vbmdvb3NlXG5mdW5jdGlvbiB1cGRhdGVQcm9qZWN0UHJvZmlsZShwcm9qZWN0X2lkLCBib2R5LCBjYWxsZWRCeSkge1xuICBQcm9qZWN0LmZpbmRCeUlkQW5kVXBkYXRlKHByb2plY3RfaWQsIGJvZHksIHsgbmV3OiB0cnVlLCB1cHNlcnQ6IHRydWUgfSwgZnVuY3Rpb24gKGVyciwgdXBkYXRlZFByb2plY3QpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICB3aW5zdG9uLmVycm9yKCd1cGRhdGVQcm9qZWN0UHJvZmlsZSBFcnJvciAnLCBlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5zdG9uLmRlYnVnKHVwZGF0ZWRQcm9qZWN0KVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNhdmVPbkRCKHN1YnNjcmlwdGlvbmlkLCBwcm9qZWN0aWQsIG9iaiwgdXNlcmlkLCBzdHJpcGVfZXZlbnQsIHBsYW5fbmFtZSwgc2VhdHNfbnVtKSB7XG4gIHdpbnN0b24uaW5mbygnc2F2ZU9uREIgcGxhbl9uYW1lJywgcGxhbl9uYW1lKVxuICB3aW5zdG9uLmluZm8oJ3NhdmVPbkRCIHNlYXRzX251bScsIHNlYXRzX251bSlcblxuICB2YXIgbmV3UGF5bWVudFN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb25QYXltZW50KHtcbiAgICBfaWQ6IG5ldyBtb25nb29zZS5UeXBlcy5PYmplY3RJZCgpLFxuICAgIHN1YnNjcmlwdGlvbl9pZDogc3Vic2NyaXB0aW9uaWQsXG4gICAgcHJvamVjdF9pZDogcHJvamVjdGlkLFxuICAgIHVzZXJfaWQ6IHVzZXJpZCxcbiAgICBzdHJpcGVfZXZlbnQ6IHN0cmlwZV9ldmVudCxcbiAgICBwbGFuX25hbWU6IHBsYW5fbmFtZSxcbiAgICBhZ2VudHM6IHNlYXRzX251bSxcbiAgICBvYmplY3Q6IG9ialxuICB9KTtcblxuICBuZXdQYXltZW50U3Vic2NyaXB0aW9uLnNhdmUoZnVuY3Rpb24gKGVyciwgc2F2ZWRTdWJzY3JpcHRpb25QYXltZW50KSB7XG4gICAgaWYgKGVycikge1xuICAgICAgd2luc3Rvbi5lcnJvcignLS0tID4gRVJST1IgJywgZXJyKVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgc3VjY2VzczogZmFsc2UsIG1zZzogJ0Vycm9yIHNhdmluZyBvYmplY3QuJyB9KTtcbiAgICB9XG4gICAgd2luc3Rvbi5pbmZvKCdzYXZlZFN1YnNjcmlwdGlvblBheW1lbnQgJywgc2F2ZWRTdWJzY3JpcHRpb25QYXltZW50KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNhdmVGaXJzdEludm9pY2VQYXltZW50U3VjY2VlZGVkKHN1YnNjcmlwdGlvbmlkLCBvYmosIHN0cmlwZV9ldmVudCkge1xuICBjb25zb2xlLmxvZygnc2F2ZUZpcnN0SW52b2ljZVBheW1lbnRTdWNjZWVkZWQgc3Vic2NyaXB0aW9uaWQnLCBzdWJzY3JpcHRpb25pZClcbiAgY29uc29sZS5sb2coJ3NhdmVGaXJzdEludm9pY2VQYXltZW50U3VjY2VlZGVkIHN0cmlwZV9ldmVudCcsIHN0cmlwZV9ldmVudClcblxuICB2YXIgbmV3UGF5bWVudFN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb25QYXltZW50KHtcbiAgICBfaWQ6IG5ldyBtb25nb29zZS5UeXBlcy5PYmplY3RJZCgpLFxuICAgIHN1YnNjcmlwdGlvbl9pZDogc3Vic2NyaXB0aW9uaWQsXG4gICAgc3RyaXBlX2V2ZW50OiBzdHJpcGVfZXZlbnQsXG4gICAgb2JqZWN0OiBvYmpcbiAgfSk7XG5cbiAgbmV3UGF5bWVudFN1YnNjcmlwdGlvbi5zYXZlKGZ1bmN0aW9uIChlcnIsIHNhdmVkU3Vic2NyaXB0aW9uUGF5bWVudCkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHdpbnN0b24uZXJyb3IoJy0tLSA+IEVSUk9SICcsIGVycilcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6ICdFcnJvciBzYXZpbmcgb2JqZWN0LicgfSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdzYXZlZFN1YnNjcmlwdGlvblBheW1lbnQgPj4gJywgc2F2ZWRTdWJzY3JpcHRpb25QYXltZW50KTtcbiAgfSk7XG59XG5cbnJvdXRlci5wdXQoJy9jYW5jZWxzdWJzY3JpcHRpb24nLCBbcGFzc3BvcnQuYXV0aGVudGljYXRlKFsnYmFzaWMnLCAnand0J10sIHsgc2Vzc2lvbjogZmFsc2UgfSksIHZhbGlkdG9rZW5dLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgdmFyIHByb2plY3RpZCA9IHJlcS5ib2R5LnByb2plY3RpZFxuICB2YXIgdXNlcmlkID0gcmVxLmJvZHkudXNlcmlkXG4gIHdpbnN0b24uaW5mbygnwrvCu8K7IMK7wrvCuyBjYW5jZWxzdWJzY3JpcHRpb24gcHJvamVjdGlkJywgcHJvamVjdGlkKTtcbiAgd2luc3Rvbi5pbmZvKCfCu8K7wrsgwrvCu8K7IGNhbmNlbHN1YnNjcmlwdGlvbiB1c2VyaWQnLCB1c2VyaWQpO1xuXG4gIFByb2plY3QuZmluZE9uZSh7IF9pZDogcHJvamVjdGlkIH0sIGZ1bmN0aW9uIChlcnIsIHByb2plY3QpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICB3aW5zdG9uLmVycm9yKCctLSA+IGNhbmNlbHN1YnNjcmlwdGlvbiBFcnJvciBnZXR0aW5nIHByb2plY3QgJywgZXJyKVxuICAgICAgcmV0dXJuIChlcnIpO1xuICAgIH1cbiAgICBpZiAocHJvamVjdCkge1xuICAgICAgd2luc3Rvbi5pbmZvKCctLSA+IGNhbmNlbHN1YnNjcmlwdGlvbiAgcHJvamVjdCAnLCBwcm9qZWN0KTtcblxuICAgICAgdmFyIHN1YnNjcmlwdGlvbmlkID0gcHJvamVjdC5wcm9maWxlLnN1YnNjcmlwdGlvbklkO1xuXG4gICAgICBjb25zdCBzdHJpcGUgPSByZXF1aXJlKFwic3RyaXBlXCIpKGFwaVNlY3JldEtleSk7XG5cbiAgICAgIHN0cmlwZS5zdWJzY3JpcHRpb25zLmRlbChzdWJzY3JpcHRpb25pZCwgZnVuY3Rpb24gKGVyciwgY29uZmlybWF0aW9uKSB7XG4gICAgICAgIC8vIGFzeW5jaHJvbm91c2x5IGNhbGxlZFxuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgd2luc3Rvbi5lcnJvcignLS0gPiBjYW5jZWxzdWJzY3JpcHRpb24gIGVyciAnLCBlcnIpO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6IGVyciB9KVxuICAgICAgICB9XG4gICAgICAgIHdpbnN0b24uaW5mbygnLS0gPiBjYW5jZWxzdWJzY3JpcHRpb24gY29uZmlybWF0aW9uICcsIGNvbmZpcm1hdGlvbilcbiAgICAgICAgcmVzLmpzb24oY29uZmlybWF0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSlcbn0pO1xuXG5yb3V0ZXIucHV0KCcvdXBkYXRlc3Vic2NyaXB0aW9uJywgW3Bhc3Nwb3J0LmF1dGhlbnRpY2F0ZShbJ2Jhc2ljJywgJ2p3dCddLCB7IHNlc3Npb246IGZhbHNlIH0pLCB2YWxpZHRva2VuXSwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG5cbiAgdmFyIHByb2plY3RpZCA9IHJlcS5ib2R5LnByb2plY3RpZFxuICB2YXIgdXNlcmlkID0gcmVxLmJvZHkudXNlcmlkXG4gIHZhciBwcmljZSA9IHJlcS5ib2R5LnByaWNlXG4gIHdpbnN0b24uaW5mbygnwrvCu8K7IMK7wrvCuyB1cGRhdGVzdWJzY3JpcHRpb24gcHJvamVjdGlkJywgcHJvamVjdGlkKTtcbiAgd2luc3Rvbi5pbmZvKCfCu8K7wrsgwrvCu8K7IHVwZGF0ZXN1YnNjcmlwdGlvbiB1c2VyaWQnLCB1c2VyaWQpO1xuICB3aW5zdG9uLmluZm8oJ8K7wrvCuyDCu8K7wrsgdXBkYXRlc3Vic2NyaXB0aW9uIHByaWNlJywgcHJpY2UpO1xuICBjb25zdCBzdHJpcGUgPSByZXF1aXJlKFwic3RyaXBlXCIpKGFwaVNlY3JldEtleSk7XG5cbiAgUHJvamVjdC5maW5kT25lKHsgX2lkOiBwcm9qZWN0aWQgfSwgZnVuY3Rpb24gKGVyciwgcHJvamVjdCkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHdpbnN0b24uZXJyb3IoJy0tID4gdXBkYXRlc3Vic2NyaXB0aW9uIEVycm9yIGdldHRpbmcgcHJvamVjdCAnLCBlcnIpXG4gICAgICByZXR1cm4gKGVycik7XG4gICAgfVxuICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICB3aW5zdG9uLmluZm8oJy0tID4gdXBkYXRlc3Vic2NyaXB0aW9uICBwcm9qZWN0ICcsIHByb2plY3QpO1xuXG4gICAgICB2YXIgc3Vic2NyaXB0aW9uaWQgPSBwcm9qZWN0LnByb2ZpbGUuc3Vic2NyaXB0aW9uSWQ7XG5cbiAgICAgIC8vIHN1YnNjcmlwdGlvbmlkXG4gICAgICBzdHJpcGUuc3Vic2NyaXB0aW9ucy51cGRhdGUoXG4gICAgICAgIHN1YnNjcmlwdGlvbmlkLFxuICAgICAgICAvLyB7IHRyaWFsX2VuZDogMTU2ODIxMDY1NSB9LFxuICAgICAgICAvLyBmdW5jdGlvbiAoZXJyLCBzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgLy8gICAvLyBhc3luY2hyb25vdXNseSBjYWxsZWRcbiAgICAgICAgLy8gICBpZiAoZXJyKSB7XG4gICAgICAgIC8vICAgICB3aW5zdG9uLmVycm9yKCd1cGRhdGVzdWJzY3JpcHRpb24gc3Vic2NyaXB0aW9uIGVyciAnLCBlcnIpXG4gICAgICAgIC8vICAgICByZXR1cm5cbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vICAgd2luc3Rvbi5pbmZvKCd1cGRhdGVzdWJzY3JpcHRpb24gc3Vic2NyaXB0aW9uICcsIHN1YnNjcmlwdGlvbilcbiAgICAgICAgLy8gfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBzdHJpcGUuc3Vic2NyaXB0aW9ucy5yZXRyaWV2ZShzdWJzY3JpcHRpb25pZCwgZnVuY3Rpb24gKGVyciwgc3Vic2NyaXB0aW9uKSB7XG4gICAgLy8gICAvLyBhc3luY2hyb25vdXNseSBjYWxsZWRcbiAgICAvLyAgIGlmIChlcnIpIHtcbiAgICAvLyAgICAgd2luc3Rvbi5pbmZvKCdyZXRyaWV2ZSB1cGRhdGVkIHN1YnNjcmlwdGlvbiBlcnIgJywgZXJyKVxuICAgIC8vICAgfSBlbHNlIHtcbiAgICAvLyAgICAgd2luc3Rvbi5pbmZvKCfCu8K7wrvCu8K7wrvCu8K7wrsgZ3JldHJpZXZlIHVwZGF0ZWQgc3Vic2NyaXB0aW9uOiAnLCBzdWJzY3JpcHRpb24pO1xuXG4gICAgLy8gICB9XG4gICAgLy8gfSlcbiAgfSlcblxufSlcblxucm91dGVyLmdldCgnLzpzdWJzY3JpcHRpb25pZCcsIFtwYXNzcG9ydC5hdXRoZW50aWNhdGUoWydiYXNpYycsICdqd3QnXSwgeyBzZXNzaW9uOiBmYWxzZSB9KSwgdmFsaWR0b2tlbl0sIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuXG4gIFN1YnNjcmlwdGlvblBheW1lbnQuZmluZCh7IHN1YnNjcmlwdGlvbl9pZDogcmVxLnBhcmFtcy5zdWJzY3JpcHRpb25pZCB9KS5zb3J0KHsgJ29iamVjdC5jcmVhdGVkJzogXCJhc2NcIiB9KS5leGVjKGZ1bmN0aW9uIChlcnIsIHN1YnNjcmlwdGlvblBheW1lbnRzKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgd2luc3Rvbi5lcnJvcignLS0gPiBHRVQgU1VCU0NSSVBUSU9OIFBBWU1FTlRTIEVSUk9SdCAnLCBwcm9qZWN0KTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6IGVyciB9KVxuICAgIH1cbiAgICByZXMuanNvbihzdWJzY3JpcHRpb25QYXltZW50cyk7XG4gIH0pO1xuXG59KTtcblxuLy8gIFJFVFJJRVZFIFRIRSBDVVJSRU5UIFNVQlNDUklQVElPTiBGUk9NIFNUUklQRVxucm91dGVyLmdldCgnL3N0cmlwZXN1YnMvOnN1YnNjcmlwdGlvbmlkJywgW3Bhc3Nwb3J0LmF1dGhlbnRpY2F0ZShbJ2Jhc2ljJywgJ2p3dCddLCB7IHNlc3Npb246IGZhbHNlIH0pLCB2YWxpZHRva2VuXSwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG5cbiAgd2luc3Rvbi5pbmZvKCctLSA+IHN1YnNjcmlwdGlvbiBnZXQgYnkgaWQgZnJlcS5wYXJhbXMuc3Vic2NyaXB0aW9uaWQgJywgcmVxLnBhcmFtcy5zdWJzY3JpcHRpb25pZCk7XG4gIHZhciBzdHJpcGUgPSByZXF1aXJlKCdzdHJpcGUnKShhcGlTZWNyZXRLZXkpO1xuXG4gIHN0cmlwZS5zdWJzY3JpcHRpb25zLnJldHJpZXZlKFxuICAgIHJlcS5wYXJhbXMuc3Vic2NyaXB0aW9uaWQsXG4gICAgZnVuY3Rpb24gKGVyciwgc3Vic2NyaXB0aW9uKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHdpbnN0b24uZXJyb3IoJy0tID4gc3Vic2NyaXB0aW9uIGdldCBieSBpZCBmcm9tIHN0cmlwZSAgZXJyICcsIGVycik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6IGVyciB9KVxuICAgICAgfVxuICAgICAgd2luc3Rvbi5pbmZvKCctLSA+IHN1YnNjcmlwdGlvbiBnZXQgYnkgaWQgZnJvbSBzdHJpcGUgJywgc3Vic2NyaXB0aW9uKVxuICAgICAgcmVzLmpzb24oc3Vic2NyaXB0aW9uKTtcbiAgICB9XG4gICk7XG59KTtcblxuLy8gIFJFVFJJRVZFIFRIRSBDSEVDS09VVCBTRVNTSU9OXG5yb3V0ZXIuZ2V0KCcvY2hlY2tvdXRTZXNzaW9uLzpzZXNzaW9uaWQnLCBbcGFzc3BvcnQuYXV0aGVudGljYXRlKFsnYmFzaWMnLCAnand0J10sIHsgc2Vzc2lvbjogZmFsc2UgfSksIHZhbGlkdG9rZW5dLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcblxuICB3aW5zdG9uLmluZm8oJy0tID4gY2hlY2tvdXRTZXNzaW9uIHBhcmFtcy5zZXNzaW9uaWQgJywgcmVxLnBhcmFtcy5zZXNzaW9uaWQpO1xuICB2YXIgc3RyaXBlID0gcmVxdWlyZSgnc3RyaXBlJykoYXBpU2VjcmV0S2V5KTtcblxuICBzdHJpcGUuY2hlY2tvdXQuc2Vzc2lvbnMucmV0cmlldmUoXG4gICAgcmVxLnBhcmFtcy5zZXNzaW9uaWQsXG4gICAgZnVuY3Rpb24gKGVyciwgc2Vzc2lvbikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB3aW5zdG9uLmluZm8oJy0tID4gY2hlY2tvdXRTZXNzaW9uIGdldCBieSBpZCBmcm9tIHN0cmlwZSAgZXJyICcsIGVycik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6IGVyciB9KVxuICAgICAgfVxuICAgICAgd2luc3Rvbi5pbmZvKCctLSA+IGNoZWNrb3V0U2Vzc2lvbiBnZXQgYnkgaWQgZnJvbSBzdHJpcGUgJywgc2Vzc2lvbilcbiAgICAgIHJlcy5qc29uKHNlc3Npb24pO1xuICAgIH1cbiAgKTtcbn0pO1xuXG4vL25ldyBjb2RlXG5yb3V0ZXIuZ2V0KCcvY3VzdG9tZXIvOnByb2plY3RpZCcsIFtwYXNzcG9ydC5hdXRoZW50aWNhdGUoWydiYXNpYycsICdqd3QnXSwgeyBzZXNzaW9uOiBmYWxzZSB9KSwgdmFsaWR0b2tlbl0sIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICB3aW5zdG9uLmRlYnVnKCfCu8K7wrsgwrvCu8K7IGdldCBjdXN0b21lciBmcm9tIGRiICcsIHJlcS5wYXJhbXMpXG4gIHZhciBwcm9qZWN0aWQgPSByZXEucGFyYW1zLnByb2plY3RpZFxuXG4gIHdpbnN0b24uZGVidWcoJ8K7wrvCuyDCu8K7wrsgZ2V0IGN1c3RvbWVyIGZyb20gZGIgLSBwcm9qZWN0aWQnLCBwcm9qZWN0aWQpO1xuXG4gIFN1YnNjcmlwdGlvblBheW1lbnQuZmluZCh7IHByb2plY3RfaWQ6IHByb2plY3RpZCwgc3RyaXBlX2V2ZW50OiBcImNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkXCIgfSwgYXN5bmMgZnVuY3Rpb24gKGVyciwgc3Vic2NyaXB0aW9uKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgd2luc3Rvbi5kZWJ1ZygnLS0gPiBnZXQgY3VzdG9tZXIgZnJvbSBkYiAtIEVycm9yICcsIGVycilcbiAgICAgIHJldHVybiAoZXJyKTtcbiAgICB9XG4gICAgaWYgKHN1YnNjcmlwdGlvbikge1xuXG4gICAgICBzdWJzY3JpcHRpb25bMF0ub2JqZWN0LmN1c3RvbWVyXG4gICAgICB3aW5zdG9uLmRlYnVnKCctLSA+IGdldCBjdXN0b21lciBmcm9tIGRiIC0gc3Vic2NyaXB0aW9uID4gY3VzdG9tZXIgaWQgJywgc3Vic2NyaXB0aW9uWzBdLm9iamVjdC5jdXN0b21lcik7XG4gICAgICBjb25zdCBjdXN0b21lcmlkID0gc3Vic2NyaXB0aW9uWzBdLm9iamVjdC5jdXN0b21lclxuICAgICAgY29uc3Qgc3RyaXBlID0gcmVxdWlyZShcInN0cmlwZVwiKShhcGlTZWNyZXRLZXkpO1xuXG4gICAgICBjb25zdCBjdXN0b21lciA9IGF3YWl0IHN0cmlwZS5jdXN0b21lcnMucmV0cmlldmUoXG4gICAgICAgIGN1c3RvbWVyaWRcbiAgICAgICk7XG4gICAgICB3aW5zdG9uLmRlYnVnKCctLSA+IGdldCBjdXN0b21lciBmcm9tIGRiID4gY3VzdG9tZXIgZnJvbSBzdHJpcGUgQVBJICcsIGN1c3RvbWVyKVxuXG4gICAgICBjb25zdCBwYXltZW50TWV0aG9kcyA9IGF3YWl0IHN0cmlwZS5wYXltZW50TWV0aG9kcy5saXN0KHtcbiAgICAgICAgY3VzdG9tZXI6IGN1c3RvbWVyaWQsXG4gICAgICAgIHR5cGU6ICdjYXJkJyxcbiAgICAgIH0pO1xuICAgICAgY3VzdG9tZXJbJ3BheW1lbnRNZXRob2RzJ10gPSBwYXltZW50TWV0aG9kcztcbiAgICAgIHdpbnN0b24uZGVidWcoJy0tID4gZ2V0IGN1c3RvbWVyIGZyb20gZGIgPiBjdXN0b21lciArIHBheW1lbnRNZXRob2RzICcsIHN1YnNjcmlwdGlvbilcbiAgICAgIHJlcy5qc29uKGN1c3RvbWVyKVxuICAgIH1cbiAgfSlcbn0pO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBVcGRhdGVkIGN1c3RvbWVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5yb3V0ZXIucG9zdCgnL2N1c3RvbWVycy86Y3VzdG9tZXJpZCcsIFtwYXNzcG9ydC5hdXRoZW50aWNhdGUoWydiYXNpYycsICdqd3QnXSwgeyBzZXNzaW9uOiBmYWxzZSB9KSwgdmFsaWR0b2tlbl0sIGFzeW5jIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICB2YXIgY3VzdG9tZXJpZCA9IHJlcS5wYXJhbXMuY3VzdG9tZXJpZDtcbiAgd2luc3Rvbi5kZWJ1ZygnwrvCu8K7IMK7wrvCuyAgdXBkYXRlIGN1c3RvbWVyIC0gY3VzdG9tZXJpZCBmcm9tIHBhcmFtcyAnLCBjdXN0b21lcmlkKTtcbiAgd2luc3Rvbi5kZWJ1ZygnwrvCu8K7IMK7wrvCuyAgdXBkYXRlIGN1c3RvbWVyIC0gY2MgZnJvbSBib2R5ICcsIHJlcS5ib2R5KTtcblxuICBjb25zdCBzdHJpcGUgPSByZXF1aXJlKFwic3RyaXBlXCIpKGFwaVNlY3JldEtleSk7XG5cbiAgbGV0IHBheW1lbnRNZXRob2Q7XG4gIHRyeSB7XG4gICAgcGF5bWVudE1ldGhvZCA9IGF3YWl0IHN0cmlwZS5wYXltZW50TWV0aG9kcy5jcmVhdGUoe1xuICAgICAgdHlwZTogJ2NhcmQnLFxuICAgICAgY2FyZDoge1xuICAgICAgICBudW1iZXI6IHJlcS5ib2R5LmNyZWRpdF9jYXJkX251bSxcbiAgICAgICAgZXhwX21vbnRoOiByZXEuYm9keS5leHBpcmF0aW9uX2RhdGVfbW9udGgsXG4gICAgICAgIGV4cF95ZWFyOiByZXEuYm9keS5leHBpcmF0aW9uX2RhdGVfeWVhcixcbiAgICAgICAgY3ZjOiByZXEuYm9keS5jcmVkaXRfY2FyZF9jdmMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgd2luc3Rvbi5lcnJvcignwrvCu8K7IMK7wrvCuyAgcGF5bWVudE1ldGhvZCBjcmVhdGUgIGVycm9yICcsIGUpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAyKS5zZW5kKHsgc3VjY2VzczogZmFsc2UsIG1zZzogZSB9KVxuXG4gIH1cbiAgd2luc3Rvbi5kZWJ1ZygnwrvCu8K7IMK7wrvCuyAgcGF5bWVudE1ldGhvZCcsIHBheW1lbnRNZXRob2QpXG5cbiAgdHJ5IHtcbiAgICBjb25zdCBfcGF5bWVudE1ldGhvZCA9IGF3YWl0IHN0cmlwZS5wYXltZW50TWV0aG9kcy5hdHRhY2goXG4gICAgICBwYXltZW50TWV0aG9kLmlkLFxuICAgICAgeyBjdXN0b21lcjogY3VzdG9tZXJpZCB9XG4gICAgKTtcblxuICAgIHdpbnN0b24uZGVidWcoJ8K7wrvCuyDCu8K7wrsgIHBheW1lbnRNZXRob2QgYXR0YWNoZWQgJywgX3BheW1lbnRNZXRob2QpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB3aW5zdG9uLmVycm9yKCfCu8K7wrsgwrvCu8K7ICBwYXltZW50TWV0aG9kIGF0dGFjaGVkICBlcnJvciAnLCBlKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMSkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6IGUgfSlcbiAgfVxuXG4gIGNvbnN0IF9jdXN0b21lciA9IGF3YWl0IHN0cmlwZS5jdXN0b21lcnMudXBkYXRlKFxuICAgIGN1c3RvbWVyaWQsXG4gICAge1xuICAgICAgaW52b2ljZV9zZXR0aW5nczogeyBkZWZhdWx0X3BheW1lbnRfbWV0aG9kOiBwYXltZW50TWV0aG9kLmlkIH1cbiAgICB9KTtcbiAgcmVzLmpzb24oX2N1c3RvbWVyKTtcbn0pO1xuXG5cbnJvdXRlci5nZXQoJy9wYXltZW50X21ldGhvZHMvOmN1c3RvbWVyaWQnLCBbcGFzc3BvcnQuYXV0aGVudGljYXRlKFsnYmFzaWMnLCAnand0J10sIHsgc2Vzc2lvbjogZmFsc2UgfSksIHZhbGlkdG9rZW5dLCBhc3luYyBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgd2luc3Rvbi5pbmZvKCdnZXQgUGF5bWVudE1ldGhvZHMgbGlzdCByZXEucGFyYW1zJywgcmVxLnBhcmFtcylcbiAgdmFyIGN1c3RvbWVyX2lkID0gcmVxLnBhcmFtcy5jdXN0b21lcmlkO1xuICB3aW5zdG9uLmRlYnVnKCdnZXQgUGF5bWVudE1ldGhvZHMgbGlzdCByZXEucGFyYW1zID4gY3VzdG9tZXJfaWQgJywgY3VzdG9tZXJfaWQpXG4gIGNvbnN0IHN0cmlwZSA9IHJlcXVpcmUoXCJzdHJpcGVcIikoYXBpU2VjcmV0S2V5KTtcblxuICBjb25zdCBjdXN0b21lciA9IGF3YWl0IHN0cmlwZS5jdXN0b21lcnMucmV0cmlldmUoXG4gICAgY3VzdG9tZXJfaWRcbiAgKTtcblxuICBjb25zdCBkZWZhdWx0X3BheW1lbnRfbWV0aG9kX2lkID0gY3VzdG9tZXIuaW52b2ljZV9zZXR0aW5ncy5kZWZhdWx0X3BheW1lbnRfbWV0aG9kXG4gIGxldCBwYXltZW50TWV0aG9kcztcbiAgdHJ5IHtcbiAgICBwYXltZW50TWV0aG9kcyA9IGF3YWl0IHN0cmlwZS5wYXltZW50TWV0aG9kcy5saXN0KHtcbiAgICAgIGN1c3RvbWVyOiBjdXN0b21lcl9pZCxcbiAgICAgIHR5cGU6ICdjYXJkJyxcbiAgICB9KTtcbiAgICB3aW5zdG9uLmRlYnVnKCdnZXQgUGF5bWVudE1ldGhvZHMgbGlzdCA+IHBheW1lbnRNZXRob2RzICcsIHBheW1lbnRNZXRob2RzKVxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAxKS5zZW5kKHsgc3VjY2VzczogZmFsc2UsIG1zZzogZSB9KVxuICB9XG5cbiAgd2luc3Rvbi5kZWJ1ZygnZ2V0IFBheW1lbnRNZXRob2RzIGxpc3QgPiBwYXltZW50TWV0aG9kcyA+IGRlZmF1bHRfcGF5bWVudF9tZXRob2RfaWQgJywgZGVmYXVsdF9wYXltZW50X21ldGhvZF9pZClcbiAgcGF5bWVudE1ldGhvZHMuZGF0YS5mb3JFYWNoKHBheW1lbnRNZXRob2QgPT4ge1xuICAgIGlmIChwYXltZW50TWV0aG9kLmlkICE9PSBkZWZhdWx0X3BheW1lbnRfbWV0aG9kX2lkKSB7XG4gICAgICB3aW5zdG9uLmRlYnVnKCdnZXQgUGF5bWVudE1ldGhvZHMgbGlzdCA+IHBheW1lbnRNZXRob2RzID4gcGF5bWVudE1ldGhvZHMuZGF0YSAnLCBwYXltZW50TWV0aG9kLmlkKVxuICAgICAgZGV0YWNoUGF5bWVudEZ1bmMocGF5bWVudE1ldGhvZC5pZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICB3aW5zdG9uLmluZm8oJ2RldGFjaFBheW1lbnRGdW5jIHJlc3VsdCAnLCByZXN1bHQpXG4gICAgICB9KVxuICAgIH1cbiAgfSk7XG4gIHJlcy5qc29uKHBheW1lbnRNZXRob2RzKVxufSlcblxuYXN5bmMgZnVuY3Rpb24gZGV0YWNoUGF5bWVudEZ1bmMocGF5bWVudE1ldGhvZGlkLCBjYWxsYmFjaykge1xuICB3aW5zdG9uLmRlYnVnKCdkZXRhY2hQYXltZW50RnVuY3QgPiBwYXltZW50TWV0aG9kaWQgJywgcGF5bWVudE1ldGhvZGlkKVxuICBjb25zdCBzdHJpcGUgPSByZXF1aXJlKFwic3RyaXBlXCIpKGFwaVNlY3JldEtleSk7XG4gIGxldCBwYXltZW50TWV0aG9kO1xuICB0cnkge1xuICAgIHBheW1lbnRNZXRob2QgPSBhd2FpdCBzdHJpcGUucGF5bWVudE1ldGhvZHMuZGV0YWNoKFxuICAgICAgcGF5bWVudE1ldGhvZGlkXG4gICAgKTtcbiAgICBjYWxsYmFjayhwYXltZW50TWV0aG9kKVxuICB9IGNhdGNoIChlKSB7XG4gICAgY2FsbGJhY2soZSlcbiAgfVxufVxuXG5cblxuLy8gY3VybCAtWCBQT1NUIC11IGFuZHJlYS5sZW9AZjIxLml0OjEyMzQ1NiAtSCAnQ29udGVudC1UeXBlOmFwcGxpY2F0aW9uL2pzb24nIC1kICd7XCJ0eXBlXCI6XCJwYXltZW50X2ludGVudC5zdWNjZWVkZWRcIn0nICBodHRwOi8vbG9jYWxob3N0OjMwMDAvbW9kdWxlcy9wYXltZW50cy9zdHJpcGUvd2ViaG9va1xuXG4vLyByb3V0ZXIucG9zdCgnL3dlYmhvb2snLCBmdW5jdGlvbihyZXF1ZXN0LCByZXNwb25zZSkge1xuLy8gICB3aW5zdG9uLmluZm8oJ3N0cmlwZSB3ZWJob29rJyk7XG5cbi8vIC8vIE1hdGNoIHRoZSByYXcgYm9keSB0byBjb250ZW50IHR5cGUgYXBwbGljYXRpb24vanNvblxuLy8gLy8gYXBwLnBvc3QoJycsIGJvZHlQYXJzZXIucmF3KHt0eXBlOiAnYXBwbGljYXRpb24vanNvbid9KSwgKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XG4vLyAgICAgbGV0IGV2ZW50ID0gcmVxdWVzdC5ib2R5O1xuLy8gICAgIHdpbnN0b24uaW5mbygnZXZlbnQnLGV2ZW50KTsgIFxuXG4vLyAgICAgLy8gSGFuZGxlIHRoZSBldmVudFxuLy8gICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuLy8gICAgICAgY2FzZSAncGF5bWVudF9pbnRlbnQuc3VjY2VlZGVkJzpcbi8vICAgICAgICAgY29uc3QgcGF5bWVudEludGVudCA9IGV2ZW50LmRhdGEub2JqZWN0O1xuLy8gICAgICAgICBoYW5kbGVQYXltZW50SW50ZW50U3VjY2VlZGVkKHBheW1lbnRJbnRlbnQpO1xuLy8gICAgICAgICBicmVhaztcbi8vICAgICAgIGNhc2UgJ3BheW1lbnRfbWV0aG9kLmF0dGFjaGVkJzpcbi8vICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IGV2ZW50LmRhdGEub2JqZWN0O1xuLy8gICAgICAgICBoYW5kbGVQYXltZW50TWV0aG9kQXR0YWNoZWQocGF5bWVudE1ldGhvZCk7XG4vLyAgICAgICAgIGJyZWFrO1xuLy8gICAgICAgLy8gLi4uIGhhbmRsZSBvdGhlciBldmVudCB0eXBlc1xuLy8gICAgICAgZGVmYXVsdDpcbi8vICAgICAgICAgLy8gVW5leHBlY3RlZCBldmVudCB0eXBlXG4vLyAgICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNDAwKS5lbmQoKTtcbi8vICAgICB9XG5cbi8vICAgICAvLyBSZXR1cm4gYSByZXNwb25zZSB0byBhY2tub3dsZWRnZSByZWNlaXB0IG9mIHRoZSBldmVudFxuLy8gICAgIHJlc3BvbnNlLmpzb24oe3JlY2VpdmVkOiB0cnVlfSk7XG4vLyB9KTtcblxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sImZpbGUiOiJwYXltZW50cy9zdHJpcGUvaW5kZXguanMifQ==
